(()=>{var e={};e.id=914,e.ids=[914],e.modules={249:()=>{},846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},1135:()=>{},1630:e=>{"use strict";e.exports=require("http")},1820:e=>{"use strict";e.exports=require("os")},2412:e=>{"use strict";e.exports=require("assert")},2866:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>i.a,__next_app__:()=>x,pages:()=>o,routeModule:()=>h,tree:()=>c});var l=t(5239),r=t(8088),a=t(8170),i=t.n(a),n=t(893),d={};for(let e in n)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>n[e]);t.d(s,d);let c={children:["",{children:["unified-dashboard",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,3996)),"/app/frontend/src/app/unified-dashboard/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,4431)),"/app/frontend/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,7398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(t.t.bind(t,9999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(t.t.bind(t,5284,23)),"next/dist/client/components/unauthorized-error"]}]}.children,o=["/app/frontend/src/app/unified-dashboard/page.tsx"],x={require:t,loadChunk:()=>Promise.resolve()},h=new l.AppPageRouteModule({definition:{kind:r.RouteKind.APP_PAGE,page:"/unified-dashboard/page",pathname:"/unified-dashboard",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},3496:e=>{"use strict";e.exports=require("http2")},3682:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>N});var l=t(687),r=t(3210),a=t(5814),i=t.n(a),n=t(6189);function d({leaders:e=[],entropy:s=0,leadershipType:t="unknown"}){let[a,i]=(0,r.useState)(0),n=e.slice(0,7),d=(e,s)=>{if(0===e)return{x:150,y:80};let t=(e-1)/(s-1)*Math.PI+Math.PI,l=60+8*e;return{x:150+Math.cos(t-Math.PI/2)*l*.8,y:80+Math.sin(t-Math.PI/2)*l*.6+40}};return(0,l.jsxs)("div",{className:"leadership-viz",children:[(0,l.jsxs)("svg",{viewBox:"0 0 300 200",className:"w-full h-48",children:[(0,l.jsxs)("defs",{children:[(0,l.jsxs)("radialGradient",{id:"nodeGradient",cx:"50%",cy:"30%",r:"70%",children:[(0,l.jsx)("stop",{offset:"0%",stopColor:"#ffd700"}),(0,l.jsx)("stop",{offset:"100%",stopColor:"#8b6914"})]}),(0,l.jsxs)("filter",{id:"glow",children:[(0,l.jsx)("feGaussianBlur",{stdDeviation:"2",result:"coloredBlur"}),(0,l.jsxs)("feMerge",{children:[(0,l.jsx)("feMergeNode",{in:"coloredBlur"}),(0,l.jsx)("feMergeNode",{in:"SourceGraphic"})]})]}),(0,l.jsxs)("linearGradient",{id:"connectionGradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[(0,l.jsx)("stop",{offset:"0%",stopColor:"#ffd700",stopOpacity:.8}),(0,l.jsx)("stop",{offset:`${a}%`,stopColor:"#ff8c00",stopOpacity:1}),(0,l.jsx)("stop",{offset:"100%",stopColor:"#ffd700",stopOpacity:.3})]})]}),n.slice(1).map((e,s)=>{let t=d(0,n.length),r=d(s+1,n.length);return(0,l.jsx)("line",{x1:t.x,y1:t.y,x2:r.x,y2:r.y,stroke:"url(#connectionGradient)",strokeWidth:"2",strokeDasharray:"5,3",opacity:.6+.4*(n[s+1]?.influence_score||.5)},`line-${s}`)}),n.slice(0,3).map((e,s)=>{let t=d(s,n.length);return(0,l.jsx)("circle",{cx:t.x,cy:t.y,r:15+a%30,fill:"none",stroke:"#ffd700",strokeWidth:"1",opacity:1-a%30/30},`pulse-${s}`)}),n.map((e,s)=>{let t=d(s,n.length),r=0===s?18:12-s;return(0,l.jsxs)("g",{filter:0===s?"url(#glow)":void 0,children:[(0,l.jsx)("circle",{cx:t.x,cy:t.y,r:r,fill:"url(#nodeGradient)",stroke:"#ffd700",strokeWidth:0===s?3:1.5}),0===s&&(0,l.jsx)("text",{x:t.x,y:t.y-25,textAnchor:"middle",fill:"#ffd700",fontSize:"10",fontWeight:"bold",children:"\uD83D\uDC51"}),(0,l.jsx)("text",{x:t.x,y:t.y+r+12,textAnchor:"middle",fill:"#ffeeba",fontSize:"8",children:e.player_name?.substring(0,8)||`Player ${s+1}`})]},`node-${s}`)}),(0,l.jsxs)("g",{transform:"translate(240, 20)",children:[(0,l.jsx)("rect",{x:"0",y:"0",width:"50",height:"40",rx:"5",fill:"rgba(0,0,0,0.5)",stroke:"#8b6914"}),(0,l.jsx)("text",{x:"25",y:"15",textAnchor:"middle",fill:"#ffd700",fontSize:"8",fontWeight:"bold",children:"ENTROPY"}),(0,l.jsx)("text",{x:"25",y:"32",textAnchor:"middle",fill:"#ff8c00",fontSize:"12",fontWeight:"bold",children:s?.toFixed(2)||"0.00"})]})]}),(0,l.jsx)("div",{className:"text-center mt-2",children:(0,l.jsxs)("span",{className:"text-xs text-yellow-200 uppercase tracking-wider",children:["Structure: ",(0,l.jsx)("span",{className:"text-coc-gold font-bold",children:t})]})})]})}function c({contributors:e=[],parasites:s=0,healthGrade:t="B"}){let[a,i]=(0,r.useState)(0),n=e.slice(0,5),d={"A+":"#00ff00",A:"#32cd32","B+":"#7cfc00",B:"#ffd700","C+":"#ffa500",C:"#ff8c00",D:"#ff4500",F:"#ff0000"};return(0,l.jsx)("div",{className:"donation-flow-viz",children:(0,l.jsxs)("svg",{viewBox:"0 0 300 180",className:"w-full h-44",children:[(0,l.jsxs)("defs",{children:[(0,l.jsxs)("linearGradient",{id:"flowGradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[(0,l.jsx)("stop",{offset:"0%",stopColor:"#9b30ff"}),(0,l.jsx)("stop",{offset:"50%",stopColor:"#ff69b4"}),(0,l.jsx)("stop",{offset:"100%",stopColor:"#ffd700"})]}),(0,l.jsxs)("filter",{id:"gemGlow",children:[(0,l.jsx)("feGaussianBlur",{stdDeviation:"3",result:"coloredBlur"}),(0,l.jsxs)("feMerge",{children:[(0,l.jsx)("feMergeNode",{in:"coloredBlur"}),(0,l.jsx)("feMergeNode",{in:"SourceGraphic"})]})]})]}),(0,l.jsxs)("g",{transform:"translate(150, 90)",filter:"url(#gemGlow)",children:[(0,l.jsx)("polygon",{points:"0,-30 26,-15 26,15 0,30 -26,15 -26,-15",fill:"url(#flowGradient)",stroke:"#ffd700",strokeWidth:"2"}),(0,l.jsx)("text",{y:"5",textAnchor:"middle",fill:"#fff",fontSize:"16",fontWeight:"bold",children:"\uD83D\uDC8E"})]}),n.map((e,s)=>{let t=30+30*s,r=(a+20*s)%100/100;return(0,l.jsxs)("g",{children:[(0,l.jsx)("path",{d:`M 30 ${t} Q 80 ${t+20} 124 90`,fill:"none",stroke:"#9b30ff",strokeWidth:"2",opacity:.4+(e.donations_given||100)/500,strokeDasharray:"8,4"}),(0,l.jsx)("circle",{cx:30+94*r,cy:t+(90-t)*r+-20*Math.sin(r*Math.PI),r:"4",fill:"#ff69b4",filter:"url(#gemGlow)"}),(0,l.jsx)("text",{x:"5",y:t+4,fill:"#ffeeba",fontSize:"8",children:e.player_name?.substring(0,10)||`Player ${s+1}`})]},`flow-${s}`)}),(0,l.jsxs)("g",{transform:"translate(250, 30)",children:[(0,l.jsx)("circle",{cx:"0",cy:"0",r:"25",fill:"rgba(0,0,0,0.6)",stroke:d[t]||"#ffd700",strokeWidth:"3"}),(0,l.jsx)("text",{y:"8",textAnchor:"middle",fill:d[t]||"#ffd700",fontSize:"24",fontWeight:"bold",children:t})]}),s>0&&(0,l.jsxs)("g",{transform:"translate(250, 140)",children:[(0,l.jsx)("rect",{x:"-35",y:"-15",width:"70",height:"30",rx:"5",fill:"rgba(139,0,0,0.6)",stroke:"#ff4500"}),(0,l.jsxs)("text",{y:"5",textAnchor:"middle",fill:"#ff6b6b",fontSize:"10",fontWeight:"bold",children:["\uD83E\uDDA0 ",s," parasites"]})]})]})})}function o({freeRiders:e=0,inequality:s="moderate",raidsAnalyzed:t=0}){let[a,i]=(0,r.useState)([0,0,0,0,0]);return(0,l.jsx)("div",{className:"capital-investment-viz",children:(0,l.jsxs)("svg",{viewBox:"0 0 300 160",className:"w-full h-40",children:[(0,l.jsx)("defs",{children:(0,l.jsxs)("linearGradient",{id:"barGradient",x1:"0%",y1:"100%",x2:"0%",y2:"0%",children:[(0,l.jsx)("stop",{offset:"0%",stopColor:"#654321"}),(0,l.jsx)("stop",{offset:"100%",stopColor:"#ffd700"})]})}),[0,25,50,75,100].map((e,s)=>(0,l.jsxs)("g",{children:[(0,l.jsx)("line",{x1:"50",y1:130-e,x2:"250",y2:130-e,stroke:"#654321",strokeWidth:"0.5",opacity:"0.3"}),(0,l.jsxs)("text",{x:"45",y:134-e,textAnchor:"end",fill:"#8b6914",fontSize:"8",children:[e,"%"]})]},`grid-${s}`)),a.map((e,s)=>{let t=70+40*s;return(0,l.jsxs)("g",{children:[(0,l.jsx)("rect",{x:t,y:130-e,width:"25",height:e,fill:"url(#barGradient)",stroke:"#8b6914",strokeWidth:"1",rx:"2",style:{transition:"all 1s ease-out",transitionDelay:`${.1*s}s`}}),(0,l.jsx)("text",{x:t+12.5,y:125-e,textAnchor:"middle",fontSize:"12",children:"\uD83C\uDFF0"})]},`bar-${s}`)}),(0,l.jsx)("g",{transform:"translate(150, 15)",children:(0,l.jsxs)("text",{textAnchor:"middle",fill:"#ffd700",fontSize:"10",fontWeight:"bold",children:[t," RAIDS ANALYZED"]})}),(0,l.jsxs)("g",{transform:"translate(260, 60)",children:[(0,l.jsx)("rect",{x:"-30",y:"-25",width:"60",height:"50",rx:"5",fill:"rgba(0,0,0,0.5)",stroke:"#8b6914"}),(0,l.jsx)("text",{y:"-8",textAnchor:"middle",fill:"#ff8c00",fontSize:"8",children:"FREE RIDERS"}),(0,l.jsx)("text",{y:"12",textAnchor:"middle",fill:e>3?"#ff4500":"#ffd700",fontSize:"20",fontWeight:"bold",children:e})]}),(0,l.jsxs)("g",{transform:"translate(260, 120)",children:[(0,l.jsx)("text",{y:"0",textAnchor:"middle",fill:"#8b6914",fontSize:"8",children:"INEQUALITY"}),(0,l.jsx)("text",{y:"15",textAnchor:"middle",fill:{low:"#00ff00",moderate:"#ffd700",high:"#ff8c00",extreme:"#ff0000"}[s]||"#ffd700",fontSize:"10",fontWeight:"bold",style:{textTransform:"uppercase"},children:s})]})]})})}function x({grade:e="B",winRate:s=.5,warsAnalyzed:t=0}){let[a,i]=(0,r.useState)(1),n={"A+":"#00ff00",A:"#32cd32","B+":"#7cfc00",B:"#ffd700","C+":"#ffa500",C:"#ff8c00",D:"#ff4500",F:"#ff0000"};return(0,l.jsx)("div",{className:"fairness-scale-viz",children:(0,l.jsxs)("svg",{viewBox:"0 0 300 160",className:"w-full h-40",children:[(0,l.jsx)("defs",{children:(0,l.jsxs)("linearGradient",{id:"scaleGradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[(0,l.jsx)("stop",{offset:"0%",stopColor:"#4a3728"}),(0,l.jsx)("stop",{offset:"50%",stopColor:"#ffd700"}),(0,l.jsx)("stop",{offset:"100%",stopColor:"#4a3728"})]})}),(0,l.jsxs)("g",{transform:"translate(150, 140)",children:[(0,l.jsx)("polygon",{points:"0,-10 -30,10 30,10",fill:"#654321",stroke:"#8b6914",strokeWidth:"2"}),(0,l.jsx)("rect",{x:"-5",y:"-50",width:"10",height:"40",fill:"#4a3728",stroke:"#8b6914"})]}),(0,l.jsxs)("g",{transform:`translate(150, 90) rotate(${(s-.5)*30})`,style:{transition:"transform 1s ease-out"},children:[(0,l.jsx)("rect",{x:"-100",y:"-3",width:"200",height:"6",rx:"3",fill:"url(#scaleGradient)",stroke:"#8b6914",strokeWidth:"1"}),(0,l.jsxs)("g",{transform:"translate(-80, 0)",children:[(0,l.jsx)("line",{x1:"0",y1:"3",x2:"0",y2:"30",stroke:"#8b6914",strokeWidth:"2"}),(0,l.jsx)("ellipse",{cx:"0",cy:"35",rx:"25",ry:"8",fill:"#4a3728",stroke:"#8b6914",strokeWidth:"2"}),(0,l.jsx)("text",{y:"55",textAnchor:"middle",fill:"#ffeeba",fontSize:"8",children:"YOUR CLAN"}),(0,l.jsx)("text",{y:"38",textAnchor:"middle",fontSize:"12",children:"⚔️"})]}),(0,l.jsxs)("g",{transform:"translate(80, 0)",children:[(0,l.jsx)("line",{x1:"0",y1:"3",x2:"0",y2:"30",stroke:"#8b6914",strokeWidth:"2"}),(0,l.jsx)("ellipse",{cx:"0",cy:"35",rx:"25",ry:"8",fill:"#4a3728",stroke:"#8b6914",strokeWidth:"2"}),(0,l.jsx)("text",{y:"55",textAnchor:"middle",fill:"#ffeeba",fontSize:"8",children:"OPPONENTS"}),(0,l.jsx)("text",{y:"38",textAnchor:"middle",fontSize:"12",children:"\uD83D\uDEE1️"})]}),(0,l.jsx)("circle",{cx:"0",cy:"0",r:"8",fill:"#ffd700",stroke:"#8b6914",strokeWidth:"2"})]}),(0,l.jsxs)("g",{transform:`translate(150, 25) scale(${a})`,style:{transition:"transform 0.5s ease-out"},children:[(0,l.jsx)("circle",{cx:"0",cy:"0",r:"22",fill:"rgba(0,0,0,0.6)",stroke:n[e]||"#ffd700",strokeWidth:"3"}),(0,l.jsx)("text",{y:"8",textAnchor:"middle",fill:n[e]||"#ffd700",fontSize:"22",fontWeight:"bold",children:e})]}),(0,l.jsxs)("g",{transform:"translate(40, 25)",children:[(0,l.jsx)("text",{textAnchor:"middle",fill:"#8b6914",fontSize:"8",children:"WIN RATE"}),(0,l.jsxs)("text",{y:"15",textAnchor:"middle",fill:"#ffd700",fontSize:"14",fontWeight:"bold",children:[(100*s).toFixed(1),"%"]})]}),(0,l.jsxs)("g",{transform:"translate(260, 25)",children:[(0,l.jsx)("text",{textAnchor:"middle",fill:"#8b6914",fontSize:"8",children:"WARS"}),(0,l.jsx)("text",{y:"15",textAnchor:"middle",fill:"#ffd700",fontSize:"14",fontWeight:"bold",children:t})]})]})})}function h({dataPoints:e=[],prediction:s="stable"}){let[t,a]=(0,r.useState)([]),i=Math.max(...t.map(e=>e.trophies||0),2500),n=Math.min(...t.map(e=>e.trophies||0),1500),d=i-n||1,c=e=>130-(e-n)/d*100,o=e=>40+e/19*220,x=t.length>1?`M ${t.map((e,s)=>`${o(s)} ${c(e.trophies)}`).join(" L ")}`:"",h={rising:"#00ff00",stable:"#ffd700",falling:"#ff4500",volatile:"#ff69b4"};return(0,l.jsx)("div",{className:"trophy-volatility-viz",children:(0,l.jsxs)("svg",{viewBox:"0 0 300 160",className:"w-full h-40",children:[(0,l.jsxs)("defs",{children:[(0,l.jsxs)("linearGradient",{id:"trophyGradient",x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[(0,l.jsx)("stop",{offset:"0%",stopColor:"#ffd700",stopOpacity:.8}),(0,l.jsx)("stop",{offset:"100%",stopColor:"#ffd700",stopOpacity:0})]}),(0,l.jsxs)("filter",{id:"trophyGlow",children:[(0,l.jsx)("feGaussianBlur",{stdDeviation:"2",result:"coloredBlur"}),(0,l.jsxs)("feMerge",{children:[(0,l.jsx)("feMergeNode",{in:"coloredBlur"}),(0,l.jsx)("feMergeNode",{in:"SourceGraphic"})]})]})]}),(0,l.jsx)("text",{x:"35",y:"35",textAnchor:"end",fill:"#8b6914",fontSize:"8",children:Math.round(i)}),(0,l.jsx)("text",{x:"35",y:"130",textAnchor:"end",fill:"#8b6914",fontSize:"8",children:Math.round(n)}),[0,.25,.5,.75,1].map((e,s)=>(0,l.jsx)("line",{x1:"40",y1:30+100*e,x2:"260",y2:30+100*e,stroke:"#654321",strokeWidth:"0.5",opacity:"0.3"},`grid-${s}`)),t.length>1&&(0,l.jsx)("path",{d:`${x} L ${o(t.length-1)} 130 L 40 130 Z`,fill:"url(#trophyGradient)"}),(0,l.jsx)("path",{d:x,fill:"none",stroke:"#ffd700",strokeWidth:"2",filter:"url(#trophyGlow)",style:{transition:"all 0.3s ease-out"}}),t.map((e,s)=>(0,l.jsx)("circle",{cx:o(s),cy:c(e.trophies),r:"3",fill:"#ffd700",stroke:"#8b6914",strokeWidth:"1"},`point-${s}`)),t.length>0&&(0,l.jsx)("text",{x:o(t.length-1),y:c(t[t.length-1]?.trophies||2e3)-10,textAnchor:"middle",fontSize:"14",children:"\uD83C\uDFC6"}),(0,l.jsxs)("g",{transform:"translate(260, 20)",children:[(0,l.jsx)("rect",{x:"-30",y:"-12",width:"60",height:"24",rx:"4",fill:"rgba(0,0,0,0.5)",stroke:h[s]||"#ffd700"}),(0,l.jsx)("text",{y:"5",textAnchor:"middle",fill:h[s]||"#ffd700",fontSize:"9",fontWeight:"bold",children:s?.toUpperCase()})]}),(0,l.jsx)("text",{x:"150",y:"155",textAnchor:"middle",fill:"#8b6914",fontSize:"9",children:"DAYS"})]})})}function p({patterns:e=[]}){let[s,t]=(0,r.useState)(null),a=["00:00","06:00","12:00","18:00"],i=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],n=(e,s)=>.5*Math.sin(4*e+s)+.5,d=e=>{let s=Math.floor(255*(1-e)),t=Math.floor(215*e);return`rgb(${s}, ${t}, 0)`};return(0,l.jsx)("div",{className:"coordination-heatmap",children:(0,l.jsxs)("svg",{viewBox:"0 0 300 160",className:"w-full h-40",children:[i.map((e,s)=>(0,l.jsx)("text",{x:55+32*s,y:"20",textAnchor:"middle",fill:"#8b6914",fontSize:"8",children:e},`day-${s}`)),a.map((e,s)=>(0,l.jsx)("text",{x:"30",y:45+30*s,textAnchor:"end",fill:"#8b6914",fontSize:"8",children:e},`hour-${s}`)),i.map((e,r)=>a.map((e,a)=>{let i=n(r,a),c=s===`${r}-${a}`;return(0,l.jsxs)("g",{children:[(0,l.jsx)("rect",{x:40+32*r,y:30+30*a,width:"28",height:"26",fill:d(i),stroke:c?"#fff":"#654321",strokeWidth:c?2:1,rx:"3",opacity:.8+.2*i,onMouseEnter:()=>t(`${r}-${a}`),onMouseLeave:()=>t(null),style:{cursor:"pointer",transition:"all 0.2s"}}),i>.7&&(0,l.jsx)("text",{x:54+32*r,y:47+30*a,textAnchor:"middle",fill:"#000",fontSize:"10",children:"⚡"})]},`cell-${r}-${a}`)})),(0,l.jsxs)("g",{transform:"translate(260, 50)",children:[(0,l.jsx)("text",{x:"0",y:"-5",fill:"#8b6914",fontSize:"8",children:"Activity"}),(0,l.jsx)("defs",{children:(0,l.jsxs)("linearGradient",{id:"legendGradient",x1:"0%",y1:"100%",x2:"0%",y2:"0%",children:[(0,l.jsx)("stop",{offset:"0%",stopColor:"rgb(255, 0, 0)"}),(0,l.jsx)("stop",{offset:"100%",stopColor:"rgb(0, 215, 0)"})]})}),(0,l.jsx)("rect",{x:"0",y:"0",width:"15",height:"60",fill:"url(#legendGradient)",stroke:"#8b6914",rx:"2"}),(0,l.jsx)("text",{x:"20",y:"10",fill:"#00ff00",fontSize:"7",children:"High"}),(0,l.jsx)("text",{x:"20",y:"60",fill:"#ff4500",fontSize:"7",children:"Low"})]})]})})}function m({type:e,value:s,label:t,trend:a="stable"}){let[i,n]=(0,r.useState)(0);return(0,l.jsxs)("div",{className:"mini-stat-viz flex items-center gap-3 p-3 bg-black/30 rounded-lg border border-amber-900/50",children:[(0,l.jsx)("div",{className:"text-2xl",children:{leadership:"\uD83D\uDC51",donation:"\uD83D\uDC8E",capital:"\uD83C\uDFF0",fairness:"⚖️"}[e]}),(0,l.jsxs)("div",{className:"flex-1",children:[(0,l.jsx)("div",{className:"text-xs text-yellow-200 uppercase",children:t}),(0,l.jsx)("div",{className:"text-xl font-bold text-coc-gold",children:i.toFixed(1)})]}),(0,l.jsx)("div",{style:{color:{up:"#00ff00",down:"#ff4500",stable:"#ffd700"}[a]},children:{up:"\uD83D\uDCC8",down:"\uD83D\uDCC9",stable:"➡️"}[a]})]})}function f(){(0,n.useSearchParams)().get("clan");let[e,s]=(0,r.useState)(!0),[t,a]=(0,r.useState)({}),[d,c]=(0,r.useState)(null),[o,x]=(0,r.useState)("overview"),[h,p]=(0,r.useState)(null);return e?(0,l.jsx)("div",{className:"min-h-screen bg-coc-dark coc-wood-bg flex items-center justify-center",children:(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsx)("div",{className:"spinner mb-4 mx-auto"}),(0,l.jsx)("div",{className:"text-coc-gold text-xl",children:"Loading ML analyses..."}),(0,l.jsx)("div",{className:"text-yellow-200 text-sm mt-2",children:"Running 7 ML models on your clan data"})]})}):(0,l.jsx)("div",{className:"min-h-screen bg-coc-dark coc-wood-bg",children:(0,l.jsxs)("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[(0,l.jsxs)("div",{className:"mb-8",children:[(0,l.jsx)(i(),{href:"/",className:"text-coc-gold hover:text-yellow-300 mb-4 inline-block font-semibold",children:"← Return to Base"}),(0,l.jsx)("h1",{className:"text-4xl md:text-5xl font-bold text-coc-gold mb-2 gold-shine uppercase",children:"⚔️ War Room Dashboard ⚔️"}),(0,l.jsx)("p",{className:"text-xl md:text-2xl text-yellow-200",children:"Complete battle analysis"})]}),d&&(0,l.jsxs)("div",{className:"coc-card p-6 mb-8 border-4",children:[(0,l.jsxs)("h3",{className:"text-2xl font-bold text-coc-gold mb-4 uppercase flex items-center gap-3",children:[(0,l.jsx)("span",{className:"coc-icon",children:"\uD83D\uDCCA"}),"Intelligence Gathered"]}),(0,l.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[(0,l.jsxs)("div",{className:"coc-stat-box",children:[(0,l.jsx)("div",{className:"text-3xl md:text-4xl font-bold text-coc-gold mb-1",children:d.data_availability.player_snapshots}),(0,l.jsx)("div",{className:"text-xs text-yellow-200 uppercase",children:"Warriors"})]}),(0,l.jsxs)("div",{className:"coc-stat-box",children:[(0,l.jsx)("div",{className:"text-3xl md:text-4xl font-bold text-orange-400 mb-1",children:d.data_availability.wars}),(0,l.jsx)("div",{className:"text-xs text-yellow-200 uppercase",children:"Battles"})]}),(0,l.jsxs)("div",{className:"coc-stat-box",children:[(0,l.jsx)("div",{className:"text-3xl md:text-4xl font-bold text-red-400 mb-1",children:d.data_availability.war_attacks}),(0,l.jsx)("div",{className:"text-xs text-yellow-200 uppercase",children:"Attacks"})]}),(0,l.jsxs)("div",{className:"coc-stat-box",children:[(0,l.jsx)("div",{className:"text-3xl md:text-4xl font-bold text-purple-400 mb-1",children:d.data_availability.capital_raids}),(0,l.jsx)("div",{className:"text-xs text-yellow-200 uppercase",children:"Raids"})]}),(0,l.jsxs)("div",{className:"coc-stat-box",children:[(0,l.jsx)("div",{className:"text-3xl md:text-4xl font-bold text-green-400 mb-1",children:d.data_availability.days_of_data}),(0,l.jsx)("div",{className:"text-xs text-yellow-200 uppercase",children:"Days"})]})]})]}),(0,l.jsx)("div",{className:"flex gap-2 mb-6 overflow-x-auto pb-2",children:[{id:"overview",label:"\uD83D\uDCCB Overview"},{id:"leadership",label:"\uD83D\uDC51 Leadership"},{id:"donations",label:"\uD83D\uDC8E Donations"},{id:"capital",label:"\uD83C\uDFF0 Capital"},{id:"fairness",label:"⚖️ Fairness"},{id:"backend",label:"\uD83D\uDD27 Backend"}].map(e=>(0,l.jsx)("button",{onClick:()=>x(e.id),className:`coc-tab px-4 md:px-6 py-3 rounded-t-lg font-bold transition-all whitespace-nowrap ${o===e.id?"active":""}`,children:e.label},e.id))}),(0,l.jsxs)("div",{className:"animate-fade-in",children:["overview"===o&&(0,l.jsx)(j,{analyses:t}),"leadership"===o&&(0,l.jsx)(u,{data:t.leadership}),"donations"===o&&(0,l.jsx)(b,{data:t.donations}),"capital"===o&&(0,l.jsx)(y,{data:t.capital}),"fairness"===o&&(0,l.jsx)(g,{data:t.fairness}),"backend"===o&&(0,l.jsx)(v,{})]})]})})}function j({analyses:e}){return(0,l.jsxs)("div",{className:"space-y-8",children:[(0,l.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.leadership&&!e.leadership.error&&(0,l.jsx)(m,{type:"leadership",value:e.leadership.leadership_entropy?.entropy||0,label:"Leadership Entropy",trend:e.leadership.leadership_entropy?.entropy>2?"up":"stable"}),e.donations&&!e.donations.error&&(0,l.jsx)(m,{type:"donation",value:e.donations.overall_health_score?.score||0,label:"Donation Health",trend:"stable"}),e.capital&&!e.capital.error&&(0,l.jsx)(m,{type:"capital",value:e.capital.contribution_analysis?.raids_analyzed||0,label:"Raids Analyzed",trend:"up"}),e.fairness&&!e.fairness.error&&(0,l.jsx)(m,{type:"fairness",value:100*(e.fairness.win_rates?.all_wars?.win_rate||0),label:"Win Rate %",trend:e.fairness.win_rates?.all_wars?.win_rate>.5?"up":"down"})]}),(0,l.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[e.leadership&&!e.leadership.error&&(0,l.jsxs)("div",{className:"coc-card p-6 border-4",children:[(0,l.jsxs)("h3",{className:"text-2xl font-bold text-coc-gold mb-4 flex items-center gap-3",children:[(0,l.jsx)("span",{className:"coc-icon text-xl",children:"\uD83D\uDC51"}),"Leadership Network"]}),(0,l.jsx)(d,{leaders:e.leadership.top_leaders||[],entropy:e.leadership.leadership_entropy?.entropy,leadershipType:e.leadership.leadership_entropy?.leadership_type}),(0,l.jsxs)("div",{className:"mt-4 grid grid-cols-2 gap-4",children:[(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsx)("div",{className:"text-sm text-yellow-200",children:"Structure"}),(0,l.jsx)("div",{className:"text-lg font-bold text-coc-gold capitalize",children:e.leadership.leadership_entropy?.leadership_type})]}),(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsx)("div",{className:"text-sm text-yellow-200",children:"Top Leader"}),(0,l.jsx)("div",{className:"text-lg font-bold text-white",children:e.leadership.top_leaders?.[0]?.player_name||"N/A"})]})]})]}),e.donations&&!e.donations.error&&(0,l.jsxs)("div",{className:"coc-card p-6 border-4",children:[(0,l.jsxs)("h3",{className:"text-2xl font-bold text-coc-gold mb-4 flex items-center gap-3",children:[(0,l.jsx)("span",{className:"coc-icon text-xl",children:"\uD83D\uDC8E"}),"Donation Economy"]}),(0,l.jsx)(c,{contributors:e.donations.top_contributors||[],parasites:e.donations.parasites_detected||0,healthGrade:e.donations.overall_health_score?.grade||"B"}),(0,l.jsxs)("div",{className:"mt-4 grid grid-cols-2 gap-4",children:[(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsx)("div",{className:"text-sm text-yellow-200",children:"Reciprocity"}),(0,l.jsx)("div",{className:"text-lg font-bold text-white capitalize",children:e.donations.reciprocity?.interpretation||"N/A"})]}),(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsx)("div",{className:"text-sm text-yellow-200",children:"Network Density"}),(0,l.jsxs)("div",{className:"text-lg font-bold text-purple-400",children:[(100*(e.donations.network_metrics?.density||0)).toFixed(1),"%"]})]})]})]}),e.capital&&!e.capital.error&&(0,l.jsxs)("div",{className:"coc-card p-6 border-4",children:[(0,l.jsxs)("h3",{className:"text-2xl font-bold text-coc-gold mb-4 flex items-center gap-3",children:[(0,l.jsx)("span",{className:"coc-icon text-xl",children:"\uD83C\uDFF0"}),"Capital Investment"]}),(0,l.jsx)(o,{freeRiders:e.capital.free_riders?.count||0,inequality:e.capital.inequality?.interpretation||"moderate",raidsAnalyzed:e.capital.contribution_analysis?.raids_analyzed||0}),(0,l.jsxs)("div",{className:"mt-4 grid grid-cols-2 gap-4",children:[(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsx)("div",{className:"text-sm text-yellow-200",children:"Gini Index"}),(0,l.jsx)("div",{className:"text-lg font-bold text-orange-400",children:(e.capital.inequality?.gini_coefficient||0).toFixed(3)})]}),(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsx)("div",{className:"text-sm text-yellow-200",children:"Avg Contribution"}),(0,l.jsx)("div",{className:"text-lg font-bold text-green-400",children:Math.round(e.capital.contribution_analysis?.mean_contribution||0)})]})]})]}),e.fairness&&!e.fairness.error&&(0,l.jsxs)("div",{className:"coc-card p-6 border-4",children:[(0,l.jsxs)("h3",{className:"text-2xl font-bold text-coc-gold mb-4 flex items-center gap-3",children:[(0,l.jsx)("span",{className:"coc-icon text-xl",children:"⚖️"}),"Matchmaking Fairness"]}),(0,l.jsx)(x,{grade:e.fairness.overall_grade?.grade||"B",winRate:e.fairness.win_rates?.all_wars?.win_rate||.5,warsAnalyzed:e.fairness.wars_analyzed||0}),(0,l.jsxs)("div",{className:"mt-4 grid grid-cols-2 gap-4",children:[(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsx)("div",{className:"text-sm text-yellow-200",children:"Bias Score"}),(0,l.jsx)("div",{className:"text-lg font-bold text-blue-400",children:(e.fairness.strength_bias?.bias_score||0).toFixed(2)})]}),(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsx)("div",{className:"text-sm text-yellow-200",children:"Description"}),(0,l.jsx)("div",{className:"text-sm font-bold text-white",children:e.fairness.overall_grade?.description||"N/A"})]})]})]})]}),(0,l.jsxs)("div",{className:"coc-card p-6 border-4",children:[(0,l.jsxs)("h3",{className:"text-2xl font-bold text-coc-gold mb-4 flex items-center gap-3",children:[(0,l.jsx)("span",{className:"coc-icon text-xl",children:"\uD83D\uDD2E"}),"Coming Soon - Data Collection in Progress"]}),(0,l.jsxs)("div",{className:"grid md:grid-cols-3 gap-4",children:[(0,l.jsxs)("div",{className:"bg-black/30 rounded-lg p-4 border border-amber-900/50",children:[(0,l.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,l.jsx)("span",{className:"text-2xl",children:"\uD83C\uDFAF"}),(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"font-bold text-yellow-100",children:"Pressure Analysis"}),(0,l.jsx)("div",{className:"text-xs text-yellow-200",children:"Module 2"})]})]}),(0,l.jsx)("div",{className:"text-sm text-yellow-200",children:"Requires individual attack data from war logs"}),(0,l.jsx)("div",{className:"coc-progress-bar h-2 mt-3",children:(0,l.jsx)("div",{className:"coc-progress-fill",style:{width:"30%"}})})]}),(0,l.jsxs)("div",{className:"bg-black/30 rounded-lg p-4 border border-amber-900/50",children:[(0,l.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,l.jsx)("span",{className:"text-2xl",children:"\uD83E\uDD1D"}),(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"font-bold text-yellow-100",children:"Coordination Analysis"}),(0,l.jsx)("div",{className:"text-xs text-yellow-200",children:"Module 3"})]})]}),(0,l.jsx)(p,{}),(0,l.jsx)("div",{className:"text-xs text-yellow-200 mt-2",children:"Preview: Attack timing patterns"})]}),(0,l.jsxs)("div",{className:"bg-black/30 rounded-lg p-4 border border-amber-900/50",children:[(0,l.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,l.jsx)("span",{className:"text-2xl",children:"\uD83C\uDFC6"}),(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"font-bold text-yellow-100",children:"Trophy Volatility"}),(0,l.jsx)("div",{className:"text-xs text-yellow-200",children:"Module 4"})]})]}),(0,l.jsx)(h,{prediction:"stable"}),(0,l.jsx)("div",{className:"text-xs text-yellow-200 mt-2",children:"Needs 30+ days of snapshots"})]})]})]})]})}function u({data:e}){return!e||e.error?(0,l.jsx)("div",{className:"text-white",children:"Error loading leadership data"}):(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsxs)("div",{className:"coc-card p-6 border-4",children:[(0,l.jsxs)("h2",{className:"text-2xl font-bold text-coc-gold mb-6 flex items-center gap-3",children:[(0,l.jsx)("span",{className:"coc-icon text-xl",children:"\uD83D\uDC51"}),"Clan Hierarchy Visualization"]}),(0,l.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,l.jsx)("div",{children:(0,l.jsx)(d,{leaders:e.top_leaders||[],entropy:e.leadership_entropy?.entropy,leadershipType:e.leadership_entropy?.leadership_type})}),(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsxs)("div",{className:"bg-black/30 p-4 rounded-lg border border-amber-900/50",children:[(0,l.jsx)("h4",{className:"text-coc-gold font-bold mb-2",children:"\uD83D\uDCCA What is Leadership Entropy?"}),(0,l.jsx)("p",{className:"text-yellow-200 text-sm",children:"Shannon Entropy measures how distributed power is in your clan. Higher entropy = more shared leadership. Lower entropy = concentrated power."})]}),(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,l.jsxs)("div",{className:"bg-black/30 p-3 rounded-lg text-center",children:[(0,l.jsx)("div",{className:"text-3xl font-bold text-coc-gold",children:e.leadership_entropy?.entropy?.toFixed(2)}),(0,l.jsx)("div",{className:"text-xs text-yellow-200 uppercase",children:"Entropy (bits)"})]}),(0,l.jsxs)("div",{className:"bg-black/30 p-3 rounded-lg text-center",children:[(0,l.jsx)("div",{className:"text-3xl font-bold text-purple-400 capitalize",children:e.leadership_entropy?.leadership_type}),(0,l.jsx)("div",{className:"text-xs text-yellow-200 uppercase",children:"Structure Type"})]})]})]})]})]}),(0,l.jsxs)("div",{className:"coc-card p-6 border-4",children:[(0,l.jsx)("h2",{className:"text-2xl font-bold text-coc-gold mb-6",children:"⚔️ Top 10 Influential Warriors"}),(0,l.jsx)("div",{className:"overflow-x-auto",children:(0,l.jsxs)("table",{className:"coc-table",children:[(0,l.jsx)("thead",{children:(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{className:"p-3",children:"Rank"}),(0,l.jsx)("th",{className:"p-3",children:"Warrior"}),(0,l.jsx)("th",{className:"p-3",children:"Influence Power"}),(0,l.jsx)("th",{className:"p-3",children:"Role"})]})}),(0,l.jsx)("tbody",{children:e.top_leaders?.slice(0,10).map(e=>(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{className:"p-3",children:(0,l.jsx)("span",{className:"coc-badge w-8 h-8 text-sm",children:e.rank<=3?["\uD83E\uDD47","\uD83E\uDD48","\uD83E\uDD49"][e.rank-1]:e.rank})}),(0,l.jsx)("td",{className:"p-3 text-yellow-100 font-bold",children:e.player_name}),(0,l.jsx)("td",{className:"p-3",children:(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)("div",{className:"flex-1 coc-progress-bar h-3",children:(0,l.jsx)("div",{className:"coc-progress-fill",style:{width:`${100*e.influence_score}%`}})}),(0,l.jsxs)("span",{className:"text-coc-gold text-sm font-bold",children:[(100*e.influence_score).toFixed(1),"%"]})]})}),(0,l.jsx)("td",{className:"p-3 text-yellow-200 capitalize",children:e.formal_role})]},e.rank))})]})})]})]})}function b({data:e}){return!e||e.error?(0,l.jsx)("div",{className:"text-white",children:"Error loading donation data"}):(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsxs)("div",{className:"coc-card p-6 border-4",children:[(0,l.jsxs)("h2",{className:"text-2xl font-bold text-coc-gold mb-6 flex items-center gap-3",children:[(0,l.jsx)("span",{className:"coc-icon text-xl",children:"\uD83D\uDC8E"}),"Resource Flow Analysis"]}),(0,l.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,l.jsx)("div",{children:(0,l.jsx)(c,{contributors:e.top_contributors||[],parasites:e.parasites_detected||0,healthGrade:e.overall_health_score?.grade||"B"})}),(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsxs)("div",{className:"bg-black/30 p-4 rounded-lg border border-amber-900/50",children:[(0,l.jsx)("h4",{className:"text-coc-gold font-bold mb-2",children:"\uD83D\uDCC8 Network Health Explained"}),(0,l.jsx)("p",{className:"text-yellow-200 text-sm",children:"We analyze donation patterns using graph theory. Healthy clans have balanced give-and-take relationships. Parasites take more than they give."})]}),(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,l.jsxs)("div",{className:"bg-black/30 p-3 rounded-lg text-center",children:[(0,l.jsx)("div",{className:"text-5xl font-bold text-green-400",children:e.overall_health_score?.grade}),(0,l.jsx)("div",{className:"text-xs text-yellow-200 uppercase",children:"Health Grade"})]}),(0,l.jsxs)("div",{className:"bg-black/30 p-3 rounded-lg text-center",children:[(0,l.jsx)("div",{className:"text-3xl font-bold text-red-400",children:e.parasites_detected||0}),(0,l.jsx)("div",{className:"text-xs text-yellow-200 uppercase",children:"Parasites Found"})]})]})]})]})]}),(0,l.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,l.jsxs)("div",{className:"coc-card p-6 border-4",children:[(0,l.jsx)("h3",{className:"text-xl font-bold text-coc-gold mb-4",children:"\uD83C\uDF1F Top Contributors"}),(0,l.jsx)("div",{className:"space-y-3",children:e.top_contributors?.slice(0,5).map((e,s)=>(0,l.jsxs)("div",{className:"flex justify-between items-center bg-black/20 p-3 rounded-lg",children:[(0,l.jsxs)("div",{className:"flex items-center gap-3",children:[(0,l.jsx)("span",{className:"coc-badge w-8 h-8 text-sm",children:s+1}),(0,l.jsx)("span",{className:"text-yellow-100 font-bold",children:e.player_name||`Player ${s+1}`})]}),(0,l.jsxs)("span",{className:"text-coc-gold font-bold",children:[e.donations_given||0," \uD83D\uDC8E"]})]},s))})]}),(0,l.jsxs)("div",{className:"coc-card p-6 border-4",children:[(0,l.jsx)("h3",{className:"text-xl font-bold text-coc-gold mb-4",children:"\uD83D\uDCCA Network Metrics"}),(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsxs)("div",{className:"flex justify-between items-center",children:[(0,l.jsx)("span",{className:"text-yellow-200",children:"Reciprocity"}),(0,l.jsx)("span",{className:"text-white capitalize font-bold",children:e.reciprocity?.interpretation||"N/A"})]}),(0,l.jsxs)("div",{className:"flex justify-between items-center",children:[(0,l.jsx)("span",{className:"text-yellow-200",children:"Network Density"}),(0,l.jsxs)("span",{className:"text-purple-400 font-bold",children:[(100*(e.network_metrics?.density||0)).toFixed(1),"%"]})]}),(0,l.jsxs)("div",{className:"flex justify-between items-center",children:[(0,l.jsx)("span",{className:"text-yellow-200",children:"Gini Coefficient"}),(0,l.jsx)("span",{className:"text-orange-400 font-bold",children:(e.inequality?.gini||0).toFixed(3)})]}),(0,l.jsxs)("div",{className:"flex justify-between items-center",children:[(0,l.jsx)("span",{className:"text-yellow-200",children:"Total Flow"}),(0,l.jsx)("span",{className:"text-coc-gold font-bold",children:e.network_metrics?.total_donations||0})]})]})]})]})]})}function y({data:e}){return!e||e.error?(0,l.jsx)("div",{className:"text-white",children:"Error loading capital data"}):(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsxs)("div",{className:"coc-card p-6 border-4",children:[(0,l.jsxs)("h2",{className:"text-2xl font-bold text-coc-gold mb-6 flex items-center gap-3",children:[(0,l.jsx)("span",{className:"coc-icon text-xl",children:"\uD83C\uDFF0"}),"Clan Capital Analysis"]}),(0,l.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,l.jsx)("div",{children:(0,l.jsx)(o,{freeRiders:e.free_riders?.count||0,inequality:e.inequality?.interpretation||"moderate",raidsAnalyzed:e.contribution_analysis?.raids_analyzed||0})}),(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsxs)("div",{className:"bg-black/30 p-4 rounded-lg border border-amber-900/50",children:[(0,l.jsx)("h4",{className:"text-coc-gold font-bold mb-2",children:"\uD83C\uDFAE Public Goods Game Theory"}),(0,l.jsx)("p",{className:"text-yellow-200 text-sm",children:"Clan Capital is a classic public goods problem. We detect free-riders (who benefit without contributing) using contribution thresholds and Gini coefficient analysis."})]}),(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,l.jsxs)("div",{className:"bg-black/30 p-3 rounded-lg text-center",children:[(0,l.jsx)("div",{className:"text-3xl font-bold text-orange-400",children:e.free_riders?.count||0}),(0,l.jsx)("div",{className:"text-xs text-yellow-200 uppercase",children:"Free Riders"})]}),(0,l.jsxs)("div",{className:"bg-black/30 p-3 rounded-lg text-center",children:[(0,l.jsx)("div",{className:"text-3xl font-bold text-coc-gold",children:e.contribution_analysis?.raids_analyzed||0}),(0,l.jsx)("div",{className:"text-xs text-yellow-200 uppercase",children:"Raids Analyzed"})]})]})]})]})]}),(0,l.jsxs)("div",{className:"grid md:grid-cols-3 gap-6",children:[(0,l.jsxs)("div",{className:"coc-card p-6 border-4 text-center",children:[(0,l.jsx)("div",{className:"text-4xl font-bold text-green-400 mb-2",children:Math.round(e.contribution_analysis?.mean_contribution||0)}),(0,l.jsx)("div",{className:"text-yellow-200",children:"Average Contribution"})]}),(0,l.jsxs)("div",{className:"coc-card p-6 border-4 text-center",children:[(0,l.jsx)("div",{className:"text-4xl font-bold text-purple-400 mb-2",children:(e.inequality?.gini_coefficient||0).toFixed(3)}),(0,l.jsx)("div",{className:"text-yellow-200",children:"Gini Coefficient"})]}),(0,l.jsxs)("div",{className:"coc-card p-6 border-4 text-center",children:[(0,l.jsx)("div",{className:"text-4xl font-bold capitalize",style:{color:e.inequality?.interpretation==="low"?"#00ff00":e.inequality?.interpretation==="high"?"#ff4500":"#ffd700"},children:e.inequality?.interpretation||"N/A"}),(0,l.jsx)("div",{className:"text-yellow-200",children:"Inequality Level"})]})]})]})}function g({data:e}){return!e||e.error?(0,l.jsx)("div",{className:"text-white",children:"Error loading fairness data"}):(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsxs)("div",{className:"coc-card p-6 border-4",children:[(0,l.jsxs)("h2",{className:"text-2xl font-bold text-coc-gold mb-6 flex items-center gap-3",children:[(0,l.jsx)("span",{className:"coc-icon text-xl",children:"⚖️"}),"Matchmaking Fairness Audit"]}),(0,l.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,l.jsx)("div",{children:(0,l.jsx)(x,{grade:e.overall_grade?.grade||"B",winRate:e.win_rates?.all_wars?.win_rate||.5,warsAnalyzed:e.wars_analyzed||0})}),(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsxs)("div",{className:"bg-black/30 p-4 rounded-lg border border-amber-900/50",children:[(0,l.jsx)("h4",{className:"text-coc-gold font-bold mb-2",children:"\uD83D\uDCD0 Fairness Metrics"}),(0,l.jsx)("p",{className:"text-yellow-200 text-sm",children:"We analyze matchmaking using demographic parity and propensity scores. A balanced scale means fair matchups. Tilted = systematic advantage/disadvantage."})]}),(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,l.jsxs)("div",{className:"bg-black/30 p-3 rounded-lg text-center",children:[(0,l.jsx)("div",{className:"text-5xl font-bold text-blue-400",children:e.overall_grade?.grade}),(0,l.jsx)("div",{className:"text-xs text-yellow-200 uppercase",children:"Fairness Grade"})]}),(0,l.jsxs)("div",{className:"bg-black/30 p-3 rounded-lg text-center",children:[(0,l.jsxs)("div",{className:"text-3xl font-bold text-purple-400",children:[(100*(e.win_rates?.all_wars?.win_rate||0)).toFixed(1),"%"]}),(0,l.jsx)("div",{className:"text-xs text-yellow-200 uppercase",children:"Overall Win Rate"})]})]})]})]})]}),(0,l.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,l.jsxs)("div",{className:"coc-card p-6 border-4",children:[(0,l.jsx)("h3",{className:"text-xl font-bold text-coc-gold mb-4",children:"\uD83D\uDCCA War Statistics"}),(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsxs)("div",{className:"flex justify-between items-center",children:[(0,l.jsx)("span",{className:"text-yellow-200",children:"Wars Analyzed"}),(0,l.jsx)("span",{className:"text-white font-bold",children:e.wars_analyzed||0})]}),(0,l.jsxs)("div",{className:"flex justify-between items-center",children:[(0,l.jsx)("span",{className:"text-yellow-200",children:"Wins"}),(0,l.jsx)("span",{className:"text-green-400 font-bold",children:e.win_rates?.all_wars?.wins||0})]}),(0,l.jsxs)("div",{className:"flex justify-between items-center",children:[(0,l.jsx)("span",{className:"text-yellow-200",children:"Losses"}),(0,l.jsx)("span",{className:"text-red-400 font-bold",children:e.win_rates?.all_wars?.losses||0})]}),(0,l.jsxs)("div",{className:"flex justify-between items-center",children:[(0,l.jsx)("span",{className:"text-yellow-200",children:"Draws"}),(0,l.jsx)("span",{className:"text-yellow-400 font-bold",children:e.win_rates?.all_wars?.draws||0})]})]})]}),(0,l.jsxs)("div",{className:"coc-card p-6 border-4",children:[(0,l.jsx)("h3",{className:"text-xl font-bold text-coc-gold mb-4",children:"\uD83C\uDFAF Bias Analysis"}),(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsxs)("div",{className:"flex justify-between items-center",children:[(0,l.jsx)("span",{className:"text-yellow-200",children:"Strength Bias Score"}),(0,l.jsx)("span",{className:"text-blue-400 font-bold",children:(e.strength_bias?.bias_score||0).toFixed(3)})]}),(0,l.jsxs)("div",{className:"flex justify-between items-center",children:[(0,l.jsx)("span",{className:"text-yellow-200",children:"Bias Interpretation"}),(0,l.jsx)("span",{className:"text-white font-bold capitalize",children:e.strength_bias?.interpretation||"N/A"})]}),(0,l.jsx)("div",{className:"coc-divider my-4"}),(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsx)("div",{className:"text-sm text-yellow-200 mb-2",children:"Grade Description"}),(0,l.jsx)("div",{className:"text-white",children:e.overall_grade?.description||"No assessment available"})]})]})]})]})]})}function v(){let e=[{step:1,title:"Data Collection",file:"data_collector.py",description:"Background scheduler fetches data from CoC API every 6 hours",code:`async def run_collection_cycle():
    for clan_tag in tracked_clans:
        await collect_clan_snapshot(clan_tag)
        await collect_war_log(clan_tag)
        await collect_capital_raids(clan_tag)`},{step:2,title:"Data Storage",file:"MongoDB Collections",description:"Time-series data stored in MongoDB for historical analysis",code:`Collections:
- players_history (snapshots every 6h)
- clans_history (clan state over time)
- wars_history (war outcomes)
- war_attacks (individual attacks)
- capital_raids_history (weekend raids)`},{step:3,title:"Feature Engineering",file:"feature_engineering.py",description:"Extract statistical features from raw data",code:`def compute_trophy_momentum(snapshots):
    # Calculate velocity of trophy changes
    slope = (trophies[-1] - trophies[0]) / days
    return slope  # Positive = climbing`},{step:4,title:"ML Model Execution",file:"ml_module_*.py",description:"Each module processes features and generates insights",code:`def generate_report(data):
    features = extract_features(data)
    results = model.predict(features)
    return {
        'metrics': results,
        'interpretation': explain(results)
    }`},{step:5,title:"API Endpoint",file:"server.py",description:"FastAPI exposes results via REST endpoints",code:`@api_router.post("/ml/leadership/analyze")
async def analyze_leadership(request):
    cached = await db.ml_results.find_one(...)
    if cached: return cached
    results = model.generate_report(data)
    await db.ml_results.insert_one({...})`}];return(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsxs)("div",{className:"coc-card p-6 border-4",children:[(0,l.jsx)("h2",{className:"text-2xl font-bold text-coc-gold mb-4",children:"\uD83D\uDD27 Backend Architecture & Workflow"}),(0,l.jsx)("p",{className:"text-yellow-200 mb-4",children:"Learn how the ML pipeline works from data collection to analysis."})]}),e.map(e=>(0,l.jsx)("div",{className:"coc-card p-6 border-4",children:(0,l.jsxs)("div",{className:"flex items-start gap-4",children:[(0,l.jsx)("div",{className:"coc-badge w-10 h-10 flex-shrink-0",children:(0,l.jsx)("span",{className:"text-coc-gold font-bold",children:e.step})}),(0,l.jsxs)("div",{className:"flex-1",children:[(0,l.jsx)("h3",{className:"text-xl font-bold text-white mb-2",children:e.title}),(0,l.jsx)("code",{className:"text-yellow-300 text-sm",children:e.file}),(0,l.jsx)("p",{className:"text-yellow-200 mt-2 mb-3",children:e.description}),(0,l.jsx)("pre",{className:"bg-black/40 p-3 rounded text-green-300 text-xs overflow-x-auto",children:(0,l.jsx)("code",{children:e.code})})]})]})},e.step)),(0,l.jsxs)("div",{className:"coc-card p-6 border-4",children:[(0,l.jsx)("h3",{className:"text-xl font-bold text-coc-gold mb-4",children:"\uD83D\uDCC1 Backend File Structure"}),(0,l.jsxs)("div",{className:"bg-black/40 p-4 rounded font-mono text-sm text-green-300",children:[(0,l.jsx)("div",{children:"/app/backend/"}),(0,l.jsx)("div",{children:"├── server.py              # FastAPI server (entry point)"}),(0,l.jsx)("div",{children:"├── coc_api_client.py     # CoC API wrapper"}),(0,l.jsx)("div",{children:"├── data_collector.py     # Background scheduler"}),(0,l.jsx)("div",{children:"├── data_models.py        # Pydantic models"}),(0,l.jsx)("div",{children:"├── feature_engineering.py # Feature extraction"}),(0,l.jsx)("div",{children:"├── ml_module_1_leadership.py"}),(0,l.jsx)("div",{children:"├── ml_module_2_pressure.py"}),(0,l.jsx)("div",{children:"├── ml_module_3_coordination.py"}),(0,l.jsx)("div",{children:"├── ml_module_4_volatility.py"}),(0,l.jsx)("div",{children:"├── ml_module_5_donations.py"}),(0,l.jsx)("div",{children:"├── ml_module_6_capital.py"}),(0,l.jsx)("div",{children:"└── ml_module_7_fairness.py"})]})]})]})}function N(){return(0,l.jsx)(r.Suspense,{fallback:(0,l.jsx)("div",{className:"min-h-screen bg-coc-dark flex items-center justify-center",children:(0,l.jsx)("div",{className:"spinner"})}),children:(0,l.jsx)(f,{})})}t(1858)},3873:e=>{"use strict";e.exports=require("path")},3996:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>l});let l=(0,t(2907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/app/frontend/src/app/unified-dashboard/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/app/frontend/src/app/unified-dashboard/page.tsx","default")},3997:e=>{"use strict";e.exports=require("tty")},4075:e=>{"use strict";e.exports=require("zlib")},4431:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>n,metadata:()=>i});var l=t(7413),r=t(7339),a=t.n(r);t(1135);let i={title:"CoC ML Research Platform",description:"Learn machine learning by analyzing Clash of Clans battle strategies"};function n({children:e}){return(0,l.jsx)("html",{lang:"en",children:(0,l.jsx)("body",{className:a().className,children:e})})}},4735:e=>{"use strict";e.exports=require("events")},4976:(e,s,t)=>{Promise.resolve().then(t.t.bind(t,6346,23)),Promise.resolve().then(t.t.bind(t,7924,23)),Promise.resolve().then(t.t.bind(t,5656,23)),Promise.resolve().then(t.t.bind(t,99,23)),Promise.resolve().then(t.t.bind(t,8243,23)),Promise.resolve().then(t.t.bind(t,8827,23)),Promise.resolve().then(t.t.bind(t,2763,23)),Promise.resolve().then(t.t.bind(t,7173,23))},5511:e=>{"use strict";e.exports=require("crypto")},5591:e=>{"use strict";e.exports=require("https")},6189:(e,s,t)=>{"use strict";var l=t(5773);t.o(l,"useRouter")&&t.d(s,{useRouter:function(){return l.useRouter}}),t.o(l,"useSearchParams")&&t.d(s,{useSearchParams:function(){return l.useSearchParams}})},6697:()=>{},7910:e=>{"use strict";e.exports=require("stream")},8128:(e,s,t)=>{Promise.resolve().then(t.t.bind(t,6444,23)),Promise.resolve().then(t.t.bind(t,6042,23)),Promise.resolve().then(t.t.bind(t,8170,23)),Promise.resolve().then(t.t.bind(t,9477,23)),Promise.resolve().then(t.t.bind(t,9345,23)),Promise.resolve().then(t.t.bind(t,2089,23)),Promise.resolve().then(t.t.bind(t,6577,23)),Promise.resolve().then(t.t.bind(t,1307,23))},8354:e=>{"use strict";e.exports=require("util")},8863:(e,s,t)=>{Promise.resolve().then(t.bind(t,3996))},9021:e=>{"use strict";e.exports=require("fs")},9111:(e,s,t)=>{Promise.resolve().then(t.bind(t,3682))},9121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},9551:e=>{"use strict";e.exports=require("url")}};var s=require("../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),l=s.X(0,[435,814,858],()=>t(2866));module.exports=l})();