(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[914],{357:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>_});var l=t(5155),a=t(2115),i=t(6874),r=t.n(i),n=t(5695),c=t(3464);function d(e){let{leaders:s=[],entropy:t=0,leadershipType:i="unknown"}=e,[r,n]=(0,a.useState)(0),c=s.slice(0,7);(0,a.useEffect)(()=>{let e=setInterval(()=>{n(e=>(e+1)%100)},50);return()=>clearInterval(e)},[]);let d=(e,s)=>{if(0===e)return{x:150,y:80};let t=(e-1)/(s-1)*Math.PI+Math.PI,l=60+8*e;return{x:150+Math.cos(t-Math.PI/2)*l*.8,y:80+Math.sin(t-Math.PI/2)*l*.6+40}};return(0,l.jsxs)("div",{className:"leadership-viz",children:[(0,l.jsxs)("svg",{viewBox:"0 0 300 200",className:"w-full h-48",children:[(0,l.jsxs)("defs",{children:[(0,l.jsxs)("radialGradient",{id:"nodeGradient",cx:"50%",cy:"30%",r:"70%",children:[(0,l.jsx)("stop",{offset:"0%",stopColor:"#ffd700"}),(0,l.jsx)("stop",{offset:"100%",stopColor:"#8b6914"})]}),(0,l.jsxs)("filter",{id:"glow",children:[(0,l.jsx)("feGaussianBlur",{stdDeviation:"2",result:"coloredBlur"}),(0,l.jsxs)("feMerge",{children:[(0,l.jsx)("feMergeNode",{in:"coloredBlur"}),(0,l.jsx)("feMergeNode",{in:"SourceGraphic"})]})]}),(0,l.jsxs)("linearGradient",{id:"connectionGradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[(0,l.jsx)("stop",{offset:"0%",stopColor:"#ffd700",stopOpacity:.8}),(0,l.jsx)("stop",{offset:"".concat(r,"%"),stopColor:"#ff8c00",stopOpacity:1}),(0,l.jsx)("stop",{offset:"100%",stopColor:"#ffd700",stopOpacity:.3})]})]}),c.slice(1).map((e,s)=>{var t;let a=d(0,c.length),i=d(s+1,c.length);return(0,l.jsx)("line",{x1:a.x,y1:a.y,x2:i.x,y2:i.y,stroke:"url(#connectionGradient)",strokeWidth:"2",strokeDasharray:"5,3",opacity:.6+.4*((null==(t=c[s+1])?void 0:t.influence_score)||.5)},"line-".concat(s))}),c.slice(0,3).map((e,s)=>{let t=d(s,c.length);return(0,l.jsx)("circle",{cx:t.x,cy:t.y,r:15+r%30,fill:"none",stroke:"#ffd700",strokeWidth:"1",opacity:1-r%30/30},"pulse-".concat(s))}),c.map((e,s)=>{var t;let a=d(s,c.length),i=0===s?18:12-s;return(0,l.jsxs)("g",{filter:0===s?"url(#glow)":void 0,children:[(0,l.jsx)("circle",{cx:a.x,cy:a.y,r:i,fill:"url(#nodeGradient)",stroke:"#ffd700",strokeWidth:0===s?3:1.5}),0===s&&(0,l.jsx)("text",{x:a.x,y:a.y-25,textAnchor:"middle",fill:"#ffd700",fontSize:"10",fontWeight:"bold",children:"\uD83D\uDC51"}),(0,l.jsx)("text",{x:a.x,y:a.y+i+12,textAnchor:"middle",fill:"#ffeeba",fontSize:"8",children:(null==(t=e.player_name)?void 0:t.substring(0,8))||"Player ".concat(s+1)})]},"node-".concat(s))}),(0,l.jsxs)("g",{transform:"translate(240, 20)",children:[(0,l.jsx)("rect",{x:"0",y:"0",width:"50",height:"40",rx:"5",fill:"rgba(0,0,0,0.5)",stroke:"#8b6914"}),(0,l.jsx)("text",{x:"25",y:"15",textAnchor:"middle",fill:"#ffd700",fontSize:"8",fontWeight:"bold",children:"ENTROPY"}),(0,l.jsx)("text",{x:"25",y:"32",textAnchor:"middle",fill:"#ff8c00",fontSize:"12",fontWeight:"bold",children:(null==t?void 0:t.toFixed(2))||"0.00"})]})]}),(0,l.jsx)("div",{className:"text-center mt-2",children:(0,l.jsxs)("span",{className:"text-xs text-yellow-200 uppercase tracking-wider",children:["Structure: ",(0,l.jsx)("span",{className:"text-coc-gold font-bold",children:i})]})})]})}function o(e){let{contributors:s=[],parasites:t=0,healthGrade:i="B"}=e,[r,n]=(0,a.useState)(0);(0,a.useEffect)(()=>{let e=setInterval(()=>{n(e=>(e+2)%100)},30);return()=>clearInterval(e)},[]);let c=s.slice(0,5),d={"A+":"#00ff00",A:"#32cd32","B+":"#7cfc00",B:"#ffd700","C+":"#ffa500",C:"#ff8c00",D:"#ff4500",F:"#ff0000"};return(0,l.jsx)("div",{className:"donation-flow-viz",children:(0,l.jsxs)("svg",{viewBox:"0 0 300 180",className:"w-full h-44",children:[(0,l.jsxs)("defs",{children:[(0,l.jsxs)("linearGradient",{id:"flowGradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[(0,l.jsx)("stop",{offset:"0%",stopColor:"#9b30ff"}),(0,l.jsx)("stop",{offset:"50%",stopColor:"#ff69b4"}),(0,l.jsx)("stop",{offset:"100%",stopColor:"#ffd700"})]}),(0,l.jsxs)("filter",{id:"gemGlow",children:[(0,l.jsx)("feGaussianBlur",{stdDeviation:"3",result:"coloredBlur"}),(0,l.jsxs)("feMerge",{children:[(0,l.jsx)("feMergeNode",{in:"coloredBlur"}),(0,l.jsx)("feMergeNode",{in:"SourceGraphic"})]})]})]}),(0,l.jsxs)("g",{transform:"translate(150, 90)",filter:"url(#gemGlow)",children:[(0,l.jsx)("polygon",{points:"0,-30 26,-15 26,15 0,30 -26,15 -26,-15",fill:"url(#flowGradient)",stroke:"#ffd700",strokeWidth:"2"}),(0,l.jsx)("text",{y:"5",textAnchor:"middle",fill:"#fff",fontSize:"16",fontWeight:"bold",children:"\uD83D\uDC8E"})]}),c.map((e,s)=>{var t;let a=30+30*s,i=(r+20*s)%100/100,n=a+(90-a)*i;return(0,l.jsxs)("g",{children:[(0,l.jsx)("path",{d:"M ".concat(30," ").concat(a," Q ",80," ").concat(a+20," ").concat(124," ").concat(90),fill:"none",stroke:"#9b30ff",strokeWidth:"2",opacity:.4+(e.donations_given||100)/500,strokeDasharray:"8,4"}),(0,l.jsx)("circle",{cx:30+94*i,cy:n+-20*Math.sin(i*Math.PI),r:"4",fill:"#ff69b4",filter:"url(#gemGlow)"}),(0,l.jsx)("text",{x:"5",y:a+4,fill:"#ffeeba",fontSize:"8",children:(null==(t=e.player_name)?void 0:t.substring(0,10))||"Player ".concat(s+1)})]},"flow-".concat(s))}),(0,l.jsxs)("g",{transform:"translate(250, 30)",children:[(0,l.jsx)("circle",{cx:"0",cy:"0",r:"25",fill:"rgba(0,0,0,0.6)",stroke:d[i]||"#ffd700",strokeWidth:"3"}),(0,l.jsx)("text",{y:"8",textAnchor:"middle",fill:d[i]||"#ffd700",fontSize:"24",fontWeight:"bold",children:i})]}),t>0&&(0,l.jsxs)("g",{transform:"translate(250, 140)",children:[(0,l.jsx)("rect",{x:"-35",y:"-15",width:"70",height:"30",rx:"5",fill:"rgba(139,0,0,0.6)",stroke:"#ff4500"}),(0,l.jsxs)("text",{y:"5",textAnchor:"middle",fill:"#ff6b6b",fontSize:"10",fontWeight:"bold",children:["\uD83E\uDDA0 ",t," parasites"]})]})]})})}function x(e){let{freeRiders:s=0,inequality:t="moderate",raidsAnalyzed:i=0}=e,[r,n]=(0,a.useState)([0,0,0,0,0]);return(0,a.useEffect)(()=>{let e=[85,65,50,35,20],s=setTimeout(()=>{n(e)},100);return()=>clearTimeout(s)},[]),(0,l.jsx)("div",{className:"capital-investment-viz",children:(0,l.jsxs)("svg",{viewBox:"0 0 300 160",className:"w-full h-40",children:[(0,l.jsx)("defs",{children:(0,l.jsxs)("linearGradient",{id:"barGradient",x1:"0%",y1:"100%",x2:"0%",y2:"0%",children:[(0,l.jsx)("stop",{offset:"0%",stopColor:"#654321"}),(0,l.jsx)("stop",{offset:"100%",stopColor:"#ffd700"})]})}),[0,25,50,75,100].map((e,s)=>(0,l.jsxs)("g",{children:[(0,l.jsx)("line",{x1:"50",y1:130-e,x2:"250",y2:130-e,stroke:"#654321",strokeWidth:"0.5",opacity:"0.3"}),(0,l.jsxs)("text",{x:"45",y:134-e,textAnchor:"end",fill:"#8b6914",fontSize:"8",children:[e,"%"]})]},"grid-".concat(s))),r.map((e,s)=>{let t=70+40*s;return(0,l.jsxs)("g",{children:[(0,l.jsx)("rect",{x:t,y:130-e,width:"25",height:e,fill:"url(#barGradient)",stroke:"#8b6914",strokeWidth:"1",rx:"2",style:{transition:"all 1s ease-out",transitionDelay:"".concat(.1*s,"s")}}),(0,l.jsx)("text",{x:t+12.5,y:125-e,textAnchor:"middle",fontSize:"12",children:"\uD83C\uDFF0"})]},"bar-".concat(s))}),(0,l.jsx)("g",{transform:"translate(150, 15)",children:(0,l.jsxs)("text",{textAnchor:"middle",fill:"#ffd700",fontSize:"10",fontWeight:"bold",children:[i," RAIDS ANALYZED"]})}),(0,l.jsxs)("g",{transform:"translate(260, 60)",children:[(0,l.jsx)("rect",{x:"-30",y:"-25",width:"60",height:"50",rx:"5",fill:"rgba(0,0,0,0.5)",stroke:"#8b6914"}),(0,l.jsx)("text",{y:"-8",textAnchor:"middle",fill:"#ff8c00",fontSize:"8",children:"FREE RIDERS"}),(0,l.jsx)("text",{y:"12",textAnchor:"middle",fill:s>3?"#ff4500":"#ffd700",fontSize:"20",fontWeight:"bold",children:s})]}),(0,l.jsxs)("g",{transform:"translate(260, 120)",children:[(0,l.jsx)("text",{y:"0",textAnchor:"middle",fill:"#8b6914",fontSize:"8",children:"INEQUALITY"}),(0,l.jsx)("text",{y:"15",textAnchor:"middle",fill:{low:"#00ff00",moderate:"#ffd700",high:"#ff8c00",extreme:"#ff0000"}[t]||"#ffd700",fontSize:"10",fontWeight:"bold",style:{textTransform:"uppercase"},children:t})]})]})})}function h(e){let{grade:s="B",winRate:t=.5,warsAnalyzed:i=0}=e,[r,n]=(0,a.useState)(1);(0,a.useEffect)(()=>{let e=setInterval(()=>{n(e=>1===e?1.05:1)},1e3);return()=>clearInterval(e)},[]);let c={"A+":"#00ff00",A:"#32cd32","B+":"#7cfc00",B:"#ffd700","C+":"#ffa500",C:"#ff8c00",D:"#ff4500",F:"#ff0000"};return(0,l.jsx)("div",{className:"fairness-scale-viz",children:(0,l.jsxs)("svg",{viewBox:"0 0 300 160",className:"w-full h-40",children:[(0,l.jsx)("defs",{children:(0,l.jsxs)("linearGradient",{id:"scaleGradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[(0,l.jsx)("stop",{offset:"0%",stopColor:"#4a3728"}),(0,l.jsx)("stop",{offset:"50%",stopColor:"#ffd700"}),(0,l.jsx)("stop",{offset:"100%",stopColor:"#4a3728"})]})}),(0,l.jsxs)("g",{transform:"translate(150, 140)",children:[(0,l.jsx)("polygon",{points:"0,-10 -30,10 30,10",fill:"#654321",stroke:"#8b6914",strokeWidth:"2"}),(0,l.jsx)("rect",{x:"-5",y:"-50",width:"10",height:"40",fill:"#4a3728",stroke:"#8b6914"})]}),(0,l.jsxs)("g",{transform:"translate(150, 90) rotate(".concat((t-.5)*30,")"),style:{transition:"transform 1s ease-out"},children:[(0,l.jsx)("rect",{x:"-100",y:"-3",width:"200",height:"6",rx:"3",fill:"url(#scaleGradient)",stroke:"#8b6914",strokeWidth:"1"}),(0,l.jsxs)("g",{transform:"translate(-80, 0)",children:[(0,l.jsx)("line",{x1:"0",y1:"3",x2:"0",y2:"30",stroke:"#8b6914",strokeWidth:"2"}),(0,l.jsx)("ellipse",{cx:"0",cy:"35",rx:"25",ry:"8",fill:"#4a3728",stroke:"#8b6914",strokeWidth:"2"}),(0,l.jsx)("text",{y:"55",textAnchor:"middle",fill:"#ffeeba",fontSize:"8",children:"YOUR CLAN"}),(0,l.jsx)("text",{y:"38",textAnchor:"middle",fontSize:"12",children:"⚔️"})]}),(0,l.jsxs)("g",{transform:"translate(80, 0)",children:[(0,l.jsx)("line",{x1:"0",y1:"3",x2:"0",y2:"30",stroke:"#8b6914",strokeWidth:"2"}),(0,l.jsx)("ellipse",{cx:"0",cy:"35",rx:"25",ry:"8",fill:"#4a3728",stroke:"#8b6914",strokeWidth:"2"}),(0,l.jsx)("text",{y:"55",textAnchor:"middle",fill:"#ffeeba",fontSize:"8",children:"OPPONENTS"}),(0,l.jsx)("text",{y:"38",textAnchor:"middle",fontSize:"12",children:"\uD83D\uDEE1️"})]}),(0,l.jsx)("circle",{cx:"0",cy:"0",r:"8",fill:"#ffd700",stroke:"#8b6914",strokeWidth:"2"})]}),(0,l.jsxs)("g",{transform:"translate(150, 25) scale(".concat(r,")"),style:{transition:"transform 0.5s ease-out"},children:[(0,l.jsx)("circle",{cx:"0",cy:"0",r:"22",fill:"rgba(0,0,0,0.6)",stroke:c[s]||"#ffd700",strokeWidth:"3"}),(0,l.jsx)("text",{y:"8",textAnchor:"middle",fill:c[s]||"#ffd700",fontSize:"22",fontWeight:"bold",children:s})]}),(0,l.jsxs)("g",{transform:"translate(40, 25)",children:[(0,l.jsx)("text",{textAnchor:"middle",fill:"#8b6914",fontSize:"8",children:"WIN RATE"}),(0,l.jsxs)("text",{y:"15",textAnchor:"middle",fill:"#ffd700",fontSize:"14",fontWeight:"bold",children:[(100*t).toFixed(1),"%"]})]}),(0,l.jsxs)("g",{transform:"translate(260, 25)",children:[(0,l.jsx)("text",{textAnchor:"middle",fill:"#8b6914",fontSize:"8",children:"WARS"}),(0,l.jsx)("text",{y:"15",textAnchor:"middle",fill:"#ffd700",fontSize:"14",fontWeight:"bold",children:i})]})]})})}function m(e){var s;let{dataPoints:t=[],prediction:i="stable"}=e,[r,n]=(0,a.useState)([]);(0,a.useEffect)(()=>{(t.length>0?t:Array.from({length:20},(e,s)=>({day:s,trophies:2e3+200*Math.sin(.5*s)+100*Math.random()}))).forEach((e,s)=>{setTimeout(()=>{n(t=>[...t.slice(0,s),e])},50*s)})},[t]);let c=Math.max(...r.map(e=>e.trophies||0),2500),d=Math.min(...r.map(e=>e.trophies||0),1500),o=c-d||1,x=e=>130-(e-d)/o*100,h=e=>40+e/19*220,m=r.length>1?"M ".concat(r.map((e,s)=>"".concat(h(s)," ").concat(x(e.trophies))).join(" L ")):"",f={rising:"#00ff00",stable:"#ffd700",falling:"#ff4500",volatile:"#ff69b4"};return(0,l.jsx)("div",{className:"trophy-volatility-viz",children:(0,l.jsxs)("svg",{viewBox:"0 0 300 160",className:"w-full h-40",children:[(0,l.jsxs)("defs",{children:[(0,l.jsxs)("linearGradient",{id:"trophyGradient",x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[(0,l.jsx)("stop",{offset:"0%",stopColor:"#ffd700",stopOpacity:.8}),(0,l.jsx)("stop",{offset:"100%",stopColor:"#ffd700",stopOpacity:0})]}),(0,l.jsxs)("filter",{id:"trophyGlow",children:[(0,l.jsx)("feGaussianBlur",{stdDeviation:"2",result:"coloredBlur"}),(0,l.jsxs)("feMerge",{children:[(0,l.jsx)("feMergeNode",{in:"coloredBlur"}),(0,l.jsx)("feMergeNode",{in:"SourceGraphic"})]})]})]}),(0,l.jsx)("text",{x:"35",y:"35",textAnchor:"end",fill:"#8b6914",fontSize:"8",children:Math.round(c)}),(0,l.jsx)("text",{x:"35",y:"130",textAnchor:"end",fill:"#8b6914",fontSize:"8",children:Math.round(d)}),[0,.25,.5,.75,1].map((e,s)=>(0,l.jsx)("line",{x1:"40",y1:30+100*e,x2:"260",y2:30+100*e,stroke:"#654321",strokeWidth:"0.5",opacity:"0.3"},"grid-".concat(s))),r.length>1&&(0,l.jsx)("path",{d:"".concat(m," L ").concat(h(r.length-1)," 130 L 40 130 Z"),fill:"url(#trophyGradient)"}),(0,l.jsx)("path",{d:m,fill:"none",stroke:"#ffd700",strokeWidth:"2",filter:"url(#trophyGlow)",style:{transition:"all 0.3s ease-out"}}),r.map((e,s)=>(0,l.jsx)("circle",{cx:h(s),cy:x(e.trophies),r:"3",fill:"#ffd700",stroke:"#8b6914",strokeWidth:"1"},"point-".concat(s))),r.length>0&&(0,l.jsx)("text",{x:h(r.length-1),y:x((null==(s=r[r.length-1])?void 0:s.trophies)||2e3)-10,textAnchor:"middle",fontSize:"14",children:"\uD83C\uDFC6"}),(0,l.jsxs)("g",{transform:"translate(260, 20)",children:[(0,l.jsx)("rect",{x:"-30",y:"-12",width:"60",height:"24",rx:"4",fill:"rgba(0,0,0,0.5)",stroke:f[i]||"#ffd700"}),(0,l.jsx)("text",{y:"5",textAnchor:"middle",fill:f[i]||"#ffd700",fontSize:"9",fontWeight:"bold",children:null==i?void 0:i.toUpperCase()})]}),(0,l.jsx)("text",{x:"150",y:"155",textAnchor:"middle",fill:"#8b6914",fontSize:"9",children:"DAYS"})]})})}function f(e){let{patterns:s=[]}=e,[t,i]=(0,a.useState)(null),r=["00:00","06:00","12:00","18:00"],n=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],c=(e,s)=>.5*Math.sin(4*e+s)+.5,d=e=>{let s=Math.floor(255*(1-e)),t=Math.floor(215*e);return"rgb(".concat(s,", ").concat(t,", 0)")};return(0,l.jsx)("div",{className:"coordination-heatmap",children:(0,l.jsxs)("svg",{viewBox:"0 0 300 160",className:"w-full h-40",children:[n.map((e,s)=>(0,l.jsx)("text",{x:55+32*s,y:"20",textAnchor:"middle",fill:"#8b6914",fontSize:"8",children:e},"day-".concat(s))),r.map((e,s)=>(0,l.jsx)("text",{x:"30",y:45+30*s,textAnchor:"end",fill:"#8b6914",fontSize:"8",children:e},"hour-".concat(s))),n.map((e,s)=>r.map((e,a)=>{let r=c(s,a),n=t==="".concat(s,"-").concat(a);return(0,l.jsxs)("g",{children:[(0,l.jsx)("rect",{x:40+32*s,y:30+30*a,width:"28",height:"26",fill:d(r),stroke:n?"#fff":"#654321",strokeWidth:n?2:1,rx:"3",opacity:.8+.2*r,onMouseEnter:()=>i("".concat(s,"-").concat(a)),onMouseLeave:()=>i(null),style:{cursor:"pointer",transition:"all 0.2s"}}),r>.7&&(0,l.jsx)("text",{x:54+32*s,y:47+30*a,textAnchor:"middle",fill:"#000",fontSize:"10",children:"⚡"})]},"cell-".concat(s,"-").concat(a))})),(0,l.jsxs)("g",{transform:"translate(260, 50)",children:[(0,l.jsx)("text",{x:"0",y:"-5",fill:"#8b6914",fontSize:"8",children:"Activity"}),(0,l.jsx)("defs",{children:(0,l.jsxs)("linearGradient",{id:"legendGradient",x1:"0%",y1:"100%",x2:"0%",y2:"0%",children:[(0,l.jsx)("stop",{offset:"0%",stopColor:"rgb(255, 0, 0)"}),(0,l.jsx)("stop",{offset:"100%",stopColor:"rgb(0, 215, 0)"})]})}),(0,l.jsx)("rect",{x:"0",y:"0",width:"15",height:"60",fill:"url(#legendGradient)",stroke:"#8b6914",rx:"2"}),(0,l.jsx)("text",{x:"20",y:"10",fill:"#00ff00",fontSize:"7",children:"High"}),(0,l.jsx)("text",{x:"20",y:"60",fill:"#ff4500",fontSize:"7",children:"Low"})]})]})})}function p(e){let{type:s,value:t,label:i,trend:r="stable"}=e,[n,c]=(0,a.useState)(0);return(0,a.useEffect)(()=>{let e=t/30,s=0,l=setInterval(()=>{(s+=e)>=t?(c(t),clearInterval(l)):c(s)},1e3/30);return()=>clearInterval(l)},[t]),(0,l.jsxs)("div",{className:"mini-stat-viz flex items-center gap-3 p-3 bg-black/30 rounded-lg border border-amber-900/50",children:[(0,l.jsx)("div",{className:"text-2xl",children:{leadership:"\uD83D\uDC51",donation:"\uD83D\uDC8E",capital:"\uD83C\uDFF0",fairness:"⚖️"}[s]}),(0,l.jsxs)("div",{className:"flex-1",children:[(0,l.jsx)("div",{className:"text-xs text-yellow-200 uppercase",children:i}),(0,l.jsx)("div",{className:"text-xl font-bold text-coc-gold",children:n.toFixed(1)})]}),(0,l.jsx)("div",{style:{color:{up:"#00ff00",down:"#ff4500",stable:"#ffd700"}[r]},children:{up:"\uD83D\uDCC8",down:"\uD83D\uDCC9",stable:"➡️"}[r]})]})}let j="".concat("https://zero-hassle-ml.preview.emergentagent.com","/api");function u(){let e=(0,n.useSearchParams)().get("clan")||"#2G8VUQGP8",[s,t]=(0,a.useState)(!0),[i,d]=(0,a.useState)({}),[o,x]=(0,a.useState)(null),[h,m]=(0,a.useState)("overview"),[f,p]=(0,a.useState)(null);(0,a.useEffect)(()=>{u()},[e]);let u=async()=>{t(!0);try{let s=await c.A.get("".concat(j,"/data/clan/").concat(encodeURIComponent(e),"/stats"));x(s.data);let t={leadership:c.A.post("".concat(j,"/ml/leadership/analyze"),{clan_tag:e}).catch(e=>({error:e.message})),donations:c.A.post("".concat(j,"/ml/donations/analyze"),{clan_tag:e}).catch(e=>({error:e.message})),capital:c.A.post("".concat(j,"/ml/capital/analyze"),{clan_tag:e}).catch(e=>({error:e.message})),fairness:c.A.post("".concat(j,"/ml/fairness/audit"),{clan_tag:e}).catch(e=>({error:e.message}))},l=await Promise.all(Object.values(t)),a=Object.keys(t),i={};a.forEach((e,s)=>{i[e]=l[s].data||l[s]}),d(i)}catch(e){p(e.message)}finally{t(!1)}};return s?(0,l.jsx)("div",{className:"min-h-screen bg-coc-dark coc-wood-bg flex items-center justify-center",children:(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsx)("div",{className:"spinner mb-4 mx-auto"}),(0,l.jsx)("div",{className:"text-coc-gold text-xl",children:"Loading ML analyses..."}),(0,l.jsx)("div",{className:"text-yellow-200 text-sm mt-2",children:"Running 7 ML models on your clan data"})]})}):(0,l.jsx)("div",{className:"min-h-screen bg-coc-dark coc-wood-bg",children:(0,l.jsxs)("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[(0,l.jsxs)("div",{className:"mb-8",children:[(0,l.jsx)(r(),{href:"/",className:"text-coc-gold hover:text-yellow-300 mb-4 inline-block font-semibold",children:"← Return to Base"}),(0,l.jsx)("h1",{className:"text-4xl md:text-5xl font-bold text-coc-gold mb-2 gold-shine uppercase",children:"⚔️ War Room Dashboard ⚔️"}),(0,l.jsx)("p",{className:"text-xl md:text-2xl text-yellow-200",children:"Complete battle analysis"})]}),o&&(0,l.jsxs)("div",{className:"coc-card p-6 mb-8 border-4",children:[(0,l.jsxs)("h3",{className:"text-2xl font-bold text-coc-gold mb-4 uppercase flex items-center gap-3",children:[(0,l.jsx)("span",{className:"coc-icon",children:"\uD83D\uDCCA"}),"Intelligence Gathered"]}),(0,l.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[(0,l.jsxs)("div",{className:"coc-stat-box",children:[(0,l.jsx)("div",{className:"text-3xl md:text-4xl font-bold text-coc-gold mb-1",children:o.data_availability.player_snapshots}),(0,l.jsx)("div",{className:"text-xs text-yellow-200 uppercase",children:"Warriors"})]}),(0,l.jsxs)("div",{className:"coc-stat-box",children:[(0,l.jsx)("div",{className:"text-3xl md:text-4xl font-bold text-orange-400 mb-1",children:o.data_availability.wars}),(0,l.jsx)("div",{className:"text-xs text-yellow-200 uppercase",children:"Battles"})]}),(0,l.jsxs)("div",{className:"coc-stat-box",children:[(0,l.jsx)("div",{className:"text-3xl md:text-4xl font-bold text-red-400 mb-1",children:o.data_availability.war_attacks}),(0,l.jsx)("div",{className:"text-xs text-yellow-200 uppercase",children:"Attacks"})]}),(0,l.jsxs)("div",{className:"coc-stat-box",children:[(0,l.jsx)("div",{className:"text-3xl md:text-4xl font-bold text-purple-400 mb-1",children:o.data_availability.capital_raids}),(0,l.jsx)("div",{className:"text-xs text-yellow-200 uppercase",children:"Raids"})]}),(0,l.jsxs)("div",{className:"coc-stat-box",children:[(0,l.jsx)("div",{className:"text-3xl md:text-4xl font-bold text-green-400 mb-1",children:o.data_availability.days_of_data}),(0,l.jsx)("div",{className:"text-xs text-yellow-200 uppercase",children:"Days"})]})]})]}),(0,l.jsx)("div",{className:"flex gap-2 mb-6 overflow-x-auto pb-2",children:[{id:"overview",label:"\uD83D\uDCCB Overview"},{id:"leadership",label:"\uD83D\uDC51 Leadership"},{id:"donations",label:"\uD83D\uDC8E Donations"},{id:"capital",label:"\uD83C\uDFF0 Capital"},{id:"fairness",label:"⚖️ Fairness"},{id:"backend",label:"\uD83D\uDD27 Backend"}].map(e=>(0,l.jsx)("button",{onClick:()=>m(e.id),className:"coc-tab px-4 md:px-6 py-3 rounded-t-lg font-bold transition-all whitespace-nowrap ".concat(h===e.id?"active":""),children:e.label},e.id))}),(0,l.jsxs)("div",{className:"animate-fade-in",children:["overview"===h&&(0,l.jsx)(v,{analyses:i}),"leadership"===h&&(0,l.jsx)(y,{data:i.leadership}),"donations"===h&&(0,l.jsx)(g,{data:i.donations}),"capital"===h&&(0,l.jsx)(b,{data:i.capital}),"fairness"===h&&(0,l.jsx)(N,{data:i.fairness}),"backend"===h&&(0,l.jsx)(w,{})]})]})})}function v(e){var s,t,a,i,r,n,c,j,u,v,y,g,b,N,w,_,k,D,A,C,S,z,W,E,M,F;let{analyses:G}=e;return(0,l.jsxs)("div",{className:"space-y-8",children:[(0,l.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[G.leadership&&!G.leadership.error&&(0,l.jsx)(p,{type:"leadership",value:(null==(s=G.leadership.leadership_entropy)?void 0:s.entropy)||0,label:"Leadership Entropy",trend:(null==(t=G.leadership.leadership_entropy)?void 0:t.entropy)>2?"up":"stable"}),G.donations&&!G.donations.error&&(0,l.jsx)(p,{type:"donation",value:(null==(a=G.donations.overall_health_score)?void 0:a.score)||0,label:"Donation Health",trend:"stable"}),G.capital&&!G.capital.error&&(0,l.jsx)(p,{type:"capital",value:(null==(i=G.capital.contribution_analysis)?void 0:i.raids_analyzed)||0,label:"Raids Analyzed",trend:"up"}),G.fairness&&!G.fairness.error&&(0,l.jsx)(p,{type:"fairness",value:100*((null==(n=G.fairness.win_rates)||null==(r=n.all_wars)?void 0:r.win_rate)||0),label:"Win Rate %",trend:(null==(j=G.fairness.win_rates)||null==(c=j.all_wars)?void 0:c.win_rate)>.5?"up":"down"})]}),(0,l.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[G.leadership&&!G.leadership.error&&(0,l.jsxs)("div",{className:"coc-card p-6 border-4",children:[(0,l.jsxs)("h3",{className:"text-2xl font-bold text-coc-gold mb-4 flex items-center gap-3",children:[(0,l.jsx)("span",{className:"coc-icon text-xl",children:"\uD83D\uDC51"}),"Leadership Network"]}),(0,l.jsx)(d,{leaders:G.leadership.top_leaders||[],entropy:null==(u=G.leadership.leadership_entropy)?void 0:u.entropy,leadershipType:null==(v=G.leadership.leadership_entropy)?void 0:v.leadership_type}),(0,l.jsxs)("div",{className:"mt-4 grid grid-cols-2 gap-4",children:[(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsx)("div",{className:"text-sm text-yellow-200",children:"Structure"}),(0,l.jsx)("div",{className:"text-lg font-bold text-coc-gold capitalize",children:null==(y=G.leadership.leadership_entropy)?void 0:y.leadership_type})]}),(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsx)("div",{className:"text-sm text-yellow-200",children:"Top Leader"}),(0,l.jsx)("div",{className:"text-lg font-bold text-white",children:(null==(b=G.leadership.top_leaders)||null==(g=b[0])?void 0:g.player_name)||"N/A"})]})]})]}),G.donations&&!G.donations.error&&(0,l.jsxs)("div",{className:"coc-card p-6 border-4",children:[(0,l.jsxs)("h3",{className:"text-2xl font-bold text-coc-gold mb-4 flex items-center gap-3",children:[(0,l.jsx)("span",{className:"coc-icon text-xl",children:"\uD83D\uDC8E"}),"Donation Economy"]}),(0,l.jsx)(o,{contributors:G.donations.top_contributors||[],parasites:G.donations.parasites_detected||0,healthGrade:(null==(N=G.donations.overall_health_score)?void 0:N.grade)||"B"}),(0,l.jsxs)("div",{className:"mt-4 grid grid-cols-2 gap-4",children:[(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsx)("div",{className:"text-sm text-yellow-200",children:"Reciprocity"}),(0,l.jsx)("div",{className:"text-lg font-bold text-white capitalize",children:(null==(w=G.donations.reciprocity)?void 0:w.interpretation)||"N/A"})]}),(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsx)("div",{className:"text-sm text-yellow-200",children:"Network Density"}),(0,l.jsxs)("div",{className:"text-lg font-bold text-purple-400",children:[(100*((null==(_=G.donations.network_metrics)?void 0:_.density)||0)).toFixed(1),"%"]})]})]})]}),G.capital&&!G.capital.error&&(0,l.jsxs)("div",{className:"coc-card p-6 border-4",children:[(0,l.jsxs)("h3",{className:"text-2xl font-bold text-coc-gold mb-4 flex items-center gap-3",children:[(0,l.jsx)("span",{className:"coc-icon text-xl",children:"\uD83C\uDFF0"}),"Capital Investment"]}),(0,l.jsx)(x,{freeRiders:(null==(k=G.capital.free_riders)?void 0:k.count)||0,inequality:(null==(D=G.capital.inequality)?void 0:D.interpretation)||"moderate",raidsAnalyzed:(null==(A=G.capital.contribution_analysis)?void 0:A.raids_analyzed)||0}),(0,l.jsxs)("div",{className:"mt-4 grid grid-cols-2 gap-4",children:[(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsx)("div",{className:"text-sm text-yellow-200",children:"Gini Index"}),(0,l.jsx)("div",{className:"text-lg font-bold text-orange-400",children:((null==(C=G.capital.inequality)?void 0:C.gini_coefficient)||0).toFixed(3)})]}),(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsx)("div",{className:"text-sm text-yellow-200",children:"Avg Contribution"}),(0,l.jsx)("div",{className:"text-lg font-bold text-green-400",children:Math.round((null==(S=G.capital.contribution_analysis)?void 0:S.mean_contribution)||0)})]})]})]}),G.fairness&&!G.fairness.error&&(0,l.jsxs)("div",{className:"coc-card p-6 border-4",children:[(0,l.jsxs)("h3",{className:"text-2xl font-bold text-coc-gold mb-4 flex items-center gap-3",children:[(0,l.jsx)("span",{className:"coc-icon text-xl",children:"⚖️"}),"Matchmaking Fairness"]}),(0,l.jsx)(h,{grade:(null==(z=G.fairness.overall_grade)?void 0:z.grade)||"B",winRate:(null==(E=G.fairness.win_rates)||null==(W=E.all_wars)?void 0:W.win_rate)||.5,warsAnalyzed:G.fairness.wars_analyzed||0}),(0,l.jsxs)("div",{className:"mt-4 grid grid-cols-2 gap-4",children:[(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsx)("div",{className:"text-sm text-yellow-200",children:"Bias Score"}),(0,l.jsx)("div",{className:"text-lg font-bold text-blue-400",children:((null==(M=G.fairness.strength_bias)?void 0:M.bias_score)||0).toFixed(2)})]}),(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsx)("div",{className:"text-sm text-yellow-200",children:"Description"}),(0,l.jsx)("div",{className:"text-sm font-bold text-white",children:(null==(F=G.fairness.overall_grade)?void 0:F.description)||"N/A"})]})]})]})]}),(0,l.jsxs)("div",{className:"coc-card p-6 border-4",children:[(0,l.jsxs)("h3",{className:"text-2xl font-bold text-coc-gold mb-4 flex items-center gap-3",children:[(0,l.jsx)("span",{className:"coc-icon text-xl",children:"\uD83D\uDD2E"}),"Coming Soon - Data Collection in Progress"]}),(0,l.jsxs)("div",{className:"grid md:grid-cols-3 gap-4",children:[(0,l.jsxs)("div",{className:"bg-black/30 rounded-lg p-4 border border-amber-900/50",children:[(0,l.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,l.jsx)("span",{className:"text-2xl",children:"\uD83C\uDFAF"}),(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"font-bold text-yellow-100",children:"Pressure Analysis"}),(0,l.jsx)("div",{className:"text-xs text-yellow-200",children:"Module 2"})]})]}),(0,l.jsx)("div",{className:"text-sm text-yellow-200",children:"Requires individual attack data from war logs"}),(0,l.jsx)("div",{className:"coc-progress-bar h-2 mt-3",children:(0,l.jsx)("div",{className:"coc-progress-fill",style:{width:"30%"}})})]}),(0,l.jsxs)("div",{className:"bg-black/30 rounded-lg p-4 border border-amber-900/50",children:[(0,l.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,l.jsx)("span",{className:"text-2xl",children:"\uD83E\uDD1D"}),(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"font-bold text-yellow-100",children:"Coordination Analysis"}),(0,l.jsx)("div",{className:"text-xs text-yellow-200",children:"Module 3"})]})]}),(0,l.jsx)(f,{}),(0,l.jsx)("div",{className:"text-xs text-yellow-200 mt-2",children:"Preview: Attack timing patterns"})]}),(0,l.jsxs)("div",{className:"bg-black/30 rounded-lg p-4 border border-amber-900/50",children:[(0,l.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,l.jsx)("span",{className:"text-2xl",children:"\uD83C\uDFC6"}),(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"font-bold text-yellow-100",children:"Trophy Volatility"}),(0,l.jsx)("div",{className:"text-xs text-yellow-200",children:"Module 4"})]})]}),(0,l.jsx)(m,{prediction:"stable"}),(0,l.jsx)("div",{className:"text-xs text-yellow-200 mt-2",children:"Needs 30+ days of snapshots"})]})]})]})]})}function y(e){var s,t,a,i,r,n;let{data:c}=e;return!c||c.error?(0,l.jsx)("div",{className:"text-white",children:"Error loading leadership data"}):(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsxs)("div",{className:"coc-card p-6 border-4",children:[(0,l.jsxs)("h2",{className:"text-2xl font-bold text-coc-gold mb-6 flex items-center gap-3",children:[(0,l.jsx)("span",{className:"coc-icon text-xl",children:"\uD83D\uDC51"}),"Clan Hierarchy Visualization"]}),(0,l.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,l.jsx)("div",{children:(0,l.jsx)(d,{leaders:c.top_leaders||[],entropy:null==(s=c.leadership_entropy)?void 0:s.entropy,leadershipType:null==(t=c.leadership_entropy)?void 0:t.leadership_type})}),(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsxs)("div",{className:"bg-black/30 p-4 rounded-lg border border-amber-900/50",children:[(0,l.jsx)("h4",{className:"text-coc-gold font-bold mb-2",children:"\uD83D\uDCCA What is Leadership Entropy?"}),(0,l.jsx)("p",{className:"text-yellow-200 text-sm",children:"Shannon Entropy measures how distributed power is in your clan. Higher entropy = more shared leadership. Lower entropy = concentrated power."})]}),(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,l.jsxs)("div",{className:"bg-black/30 p-3 rounded-lg text-center",children:[(0,l.jsx)("div",{className:"text-3xl font-bold text-coc-gold",children:null==(i=c.leadership_entropy)||null==(a=i.entropy)?void 0:a.toFixed(2)}),(0,l.jsx)("div",{className:"text-xs text-yellow-200 uppercase",children:"Entropy (bits)"})]}),(0,l.jsxs)("div",{className:"bg-black/30 p-3 rounded-lg text-center",children:[(0,l.jsx)("div",{className:"text-3xl font-bold text-purple-400 capitalize",children:null==(r=c.leadership_entropy)?void 0:r.leadership_type}),(0,l.jsx)("div",{className:"text-xs text-yellow-200 uppercase",children:"Structure Type"})]})]})]})]})]}),(0,l.jsxs)("div",{className:"coc-card p-6 border-4",children:[(0,l.jsx)("h2",{className:"text-2xl font-bold text-coc-gold mb-6",children:"⚔️ Top 10 Influential Warriors"}),(0,l.jsx)("div",{className:"overflow-x-auto",children:(0,l.jsxs)("table",{className:"coc-table",children:[(0,l.jsx)("thead",{children:(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{className:"p-3",children:"Rank"}),(0,l.jsx)("th",{className:"p-3",children:"Warrior"}),(0,l.jsx)("th",{className:"p-3",children:"Influence Power"}),(0,l.jsx)("th",{className:"p-3",children:"Role"})]})}),(0,l.jsx)("tbody",{children:null==(n=c.top_leaders)?void 0:n.slice(0,10).map(e=>(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{className:"p-3",children:(0,l.jsx)("span",{className:"coc-badge w-8 h-8 text-sm",children:e.rank<=3?["\uD83E\uDD47","\uD83E\uDD48","\uD83E\uDD49"][e.rank-1]:e.rank})}),(0,l.jsx)("td",{className:"p-3 text-yellow-100 font-bold",children:e.player_name}),(0,l.jsx)("td",{className:"p-3",children:(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)("div",{className:"flex-1 coc-progress-bar h-3",children:(0,l.jsx)("div",{className:"coc-progress-fill",style:{width:"".concat(100*e.influence_score,"%")}})}),(0,l.jsxs)("span",{className:"text-coc-gold text-sm font-bold",children:[(100*e.influence_score).toFixed(1),"%"]})]})}),(0,l.jsx)("td",{className:"p-3 text-yellow-200 capitalize",children:e.formal_role})]},e.rank))})]})})]})]})}function g(e){var s,t,a,i,r,n,c;let{data:d}=e;return!d||d.error?(0,l.jsx)("div",{className:"text-white",children:"Error loading donation data"}):(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsxs)("div",{className:"coc-card p-6 border-4",children:[(0,l.jsxs)("h2",{className:"text-2xl font-bold text-coc-gold mb-6 flex items-center gap-3",children:[(0,l.jsx)("span",{className:"coc-icon text-xl",children:"\uD83D\uDC8E"}),"Resource Flow Analysis"]}),(0,l.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,l.jsx)("div",{children:(0,l.jsx)(o,{contributors:d.top_contributors||[],parasites:d.parasites_detected||0,healthGrade:(null==(s=d.overall_health_score)?void 0:s.grade)||"B"})}),(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsxs)("div",{className:"bg-black/30 p-4 rounded-lg border border-amber-900/50",children:[(0,l.jsx)("h4",{className:"text-coc-gold font-bold mb-2",children:"\uD83D\uDCC8 Network Health Explained"}),(0,l.jsx)("p",{className:"text-yellow-200 text-sm",children:"We analyze donation patterns using graph theory. Healthy clans have balanced give-and-take relationships. Parasites take more than they give."})]}),(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,l.jsxs)("div",{className:"bg-black/30 p-3 rounded-lg text-center",children:[(0,l.jsx)("div",{className:"text-5xl font-bold text-green-400",children:null==(t=d.overall_health_score)?void 0:t.grade}),(0,l.jsx)("div",{className:"text-xs text-yellow-200 uppercase",children:"Health Grade"})]}),(0,l.jsxs)("div",{className:"bg-black/30 p-3 rounded-lg text-center",children:[(0,l.jsx)("div",{className:"text-3xl font-bold text-red-400",children:d.parasites_detected||0}),(0,l.jsx)("div",{className:"text-xs text-yellow-200 uppercase",children:"Parasites Found"})]})]})]})]})]}),(0,l.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,l.jsxs)("div",{className:"coc-card p-6 border-4",children:[(0,l.jsx)("h3",{className:"text-xl font-bold text-coc-gold mb-4",children:"\uD83C\uDF1F Top Contributors"}),(0,l.jsx)("div",{className:"space-y-3",children:null==(a=d.top_contributors)?void 0:a.slice(0,5).map((e,s)=>(0,l.jsxs)("div",{className:"flex justify-between items-center bg-black/20 p-3 rounded-lg",children:[(0,l.jsxs)("div",{className:"flex items-center gap-3",children:[(0,l.jsx)("span",{className:"coc-badge w-8 h-8 text-sm",children:s+1}),(0,l.jsx)("span",{className:"text-yellow-100 font-bold",children:e.player_name||"Player ".concat(s+1)})]}),(0,l.jsxs)("span",{className:"text-coc-gold font-bold",children:[e.donations_given||0," \uD83D\uDC8E"]})]},s))})]}),(0,l.jsxs)("div",{className:"coc-card p-6 border-4",children:[(0,l.jsx)("h3",{className:"text-xl font-bold text-coc-gold mb-4",children:"\uD83D\uDCCA Network Metrics"}),(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsxs)("div",{className:"flex justify-between items-center",children:[(0,l.jsx)("span",{className:"text-yellow-200",children:"Reciprocity"}),(0,l.jsx)("span",{className:"text-white capitalize font-bold",children:(null==(i=d.reciprocity)?void 0:i.interpretation)||"N/A"})]}),(0,l.jsxs)("div",{className:"flex justify-between items-center",children:[(0,l.jsx)("span",{className:"text-yellow-200",children:"Network Density"}),(0,l.jsxs)("span",{className:"text-purple-400 font-bold",children:[(100*((null==(r=d.network_metrics)?void 0:r.density)||0)).toFixed(1),"%"]})]}),(0,l.jsxs)("div",{className:"flex justify-between items-center",children:[(0,l.jsx)("span",{className:"text-yellow-200",children:"Gini Coefficient"}),(0,l.jsx)("span",{className:"text-orange-400 font-bold",children:((null==(n=d.inequality)?void 0:n.gini)||0).toFixed(3)})]}),(0,l.jsxs)("div",{className:"flex justify-between items-center",children:[(0,l.jsx)("span",{className:"text-yellow-200",children:"Total Flow"}),(0,l.jsx)("span",{className:"text-coc-gold font-bold",children:(null==(c=d.network_metrics)?void 0:c.total_donations)||0})]})]})]})]})]})}function b(e){var s,t,a,i,r,n,c,d,o,h;let{data:m}=e;return!m||m.error?(0,l.jsx)("div",{className:"text-white",children:"Error loading capital data"}):(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsxs)("div",{className:"coc-card p-6 border-4",children:[(0,l.jsxs)("h2",{className:"text-2xl font-bold text-coc-gold mb-6 flex items-center gap-3",children:[(0,l.jsx)("span",{className:"coc-icon text-xl",children:"\uD83C\uDFF0"}),"Clan Capital Analysis"]}),(0,l.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,l.jsx)("div",{children:(0,l.jsx)(x,{freeRiders:(null==(s=m.free_riders)?void 0:s.count)||0,inequality:(null==(t=m.inequality)?void 0:t.interpretation)||"moderate",raidsAnalyzed:(null==(a=m.contribution_analysis)?void 0:a.raids_analyzed)||0})}),(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsxs)("div",{className:"bg-black/30 p-4 rounded-lg border border-amber-900/50",children:[(0,l.jsx)("h4",{className:"text-coc-gold font-bold mb-2",children:"\uD83C\uDFAE Public Goods Game Theory"}),(0,l.jsx)("p",{className:"text-yellow-200 text-sm",children:"Clan Capital is a classic public goods problem. We detect free-riders (who benefit without contributing) using contribution thresholds and Gini coefficient analysis."})]}),(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,l.jsxs)("div",{className:"bg-black/30 p-3 rounded-lg text-center",children:[(0,l.jsx)("div",{className:"text-3xl font-bold text-orange-400",children:(null==(i=m.free_riders)?void 0:i.count)||0}),(0,l.jsx)("div",{className:"text-xs text-yellow-200 uppercase",children:"Free Riders"})]}),(0,l.jsxs)("div",{className:"bg-black/30 p-3 rounded-lg text-center",children:[(0,l.jsx)("div",{className:"text-3xl font-bold text-coc-gold",children:(null==(r=m.contribution_analysis)?void 0:r.raids_analyzed)||0}),(0,l.jsx)("div",{className:"text-xs text-yellow-200 uppercase",children:"Raids Analyzed"})]})]})]})]})]}),(0,l.jsxs)("div",{className:"grid md:grid-cols-3 gap-6",children:[(0,l.jsxs)("div",{className:"coc-card p-6 border-4 text-center",children:[(0,l.jsx)("div",{className:"text-4xl font-bold text-green-400 mb-2",children:Math.round((null==(n=m.contribution_analysis)?void 0:n.mean_contribution)||0)}),(0,l.jsx)("div",{className:"text-yellow-200",children:"Average Contribution"})]}),(0,l.jsxs)("div",{className:"coc-card p-6 border-4 text-center",children:[(0,l.jsx)("div",{className:"text-4xl font-bold text-purple-400 mb-2",children:((null==(c=m.inequality)?void 0:c.gini_coefficient)||0).toFixed(3)}),(0,l.jsx)("div",{className:"text-yellow-200",children:"Gini Coefficient"})]}),(0,l.jsxs)("div",{className:"coc-card p-6 border-4 text-center",children:[(0,l.jsx)("div",{className:"text-4xl font-bold capitalize",style:{color:(null==(d=m.inequality)?void 0:d.interpretation)==="low"?"#00ff00":(null==(o=m.inequality)?void 0:o.interpretation)==="high"?"#ff4500":"#ffd700"},children:(null==(h=m.inequality)?void 0:h.interpretation)||"N/A"}),(0,l.jsx)("div",{className:"text-yellow-200",children:"Inequality Level"})]})]})]})}function N(e){var s,t,a,i,r,n,c,d,o,x,m,f,p,j,u;let{data:v}=e;return!v||v.error?(0,l.jsx)("div",{className:"text-white",children:"Error loading fairness data"}):(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsxs)("div",{className:"coc-card p-6 border-4",children:[(0,l.jsxs)("h2",{className:"text-2xl font-bold text-coc-gold mb-6 flex items-center gap-3",children:[(0,l.jsx)("span",{className:"coc-icon text-xl",children:"⚖️"}),"Matchmaking Fairness Audit"]}),(0,l.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,l.jsx)("div",{children:(0,l.jsx)(h,{grade:(null==(s=v.overall_grade)?void 0:s.grade)||"B",winRate:(null==(a=v.win_rates)||null==(t=a.all_wars)?void 0:t.win_rate)||.5,warsAnalyzed:v.wars_analyzed||0})}),(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsxs)("div",{className:"bg-black/30 p-4 rounded-lg border border-amber-900/50",children:[(0,l.jsx)("h4",{className:"text-coc-gold font-bold mb-2",children:"\uD83D\uDCD0 Fairness Metrics"}),(0,l.jsx)("p",{className:"text-yellow-200 text-sm",children:"We analyze matchmaking using demographic parity and propensity scores. A balanced scale means fair matchups. Tilted = systematic advantage/disadvantage."})]}),(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,l.jsxs)("div",{className:"bg-black/30 p-3 rounded-lg text-center",children:[(0,l.jsx)("div",{className:"text-5xl font-bold text-blue-400",children:null==(i=v.overall_grade)?void 0:i.grade}),(0,l.jsx)("div",{className:"text-xs text-yellow-200 uppercase",children:"Fairness Grade"})]}),(0,l.jsxs)("div",{className:"bg-black/30 p-3 rounded-lg text-center",children:[(0,l.jsxs)("div",{className:"text-3xl font-bold text-purple-400",children:[(100*((null==(n=v.win_rates)||null==(r=n.all_wars)?void 0:r.win_rate)||0)).toFixed(1),"%"]}),(0,l.jsx)("div",{className:"text-xs text-yellow-200 uppercase",children:"Overall Win Rate"})]})]})]})]})]}),(0,l.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,l.jsxs)("div",{className:"coc-card p-6 border-4",children:[(0,l.jsx)("h3",{className:"text-xl font-bold text-coc-gold mb-4",children:"\uD83D\uDCCA War Statistics"}),(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsxs)("div",{className:"flex justify-between items-center",children:[(0,l.jsx)("span",{className:"text-yellow-200",children:"Wars Analyzed"}),(0,l.jsx)("span",{className:"text-white font-bold",children:v.wars_analyzed||0})]}),(0,l.jsxs)("div",{className:"flex justify-between items-center",children:[(0,l.jsx)("span",{className:"text-yellow-200",children:"Wins"}),(0,l.jsx)("span",{className:"text-green-400 font-bold",children:(null==(d=v.win_rates)||null==(c=d.all_wars)?void 0:c.wins)||0})]}),(0,l.jsxs)("div",{className:"flex justify-between items-center",children:[(0,l.jsx)("span",{className:"text-yellow-200",children:"Losses"}),(0,l.jsx)("span",{className:"text-red-400 font-bold",children:(null==(x=v.win_rates)||null==(o=x.all_wars)?void 0:o.losses)||0})]}),(0,l.jsxs)("div",{className:"flex justify-between items-center",children:[(0,l.jsx)("span",{className:"text-yellow-200",children:"Draws"}),(0,l.jsx)("span",{className:"text-yellow-400 font-bold",children:(null==(f=v.win_rates)||null==(m=f.all_wars)?void 0:m.draws)||0})]})]})]}),(0,l.jsxs)("div",{className:"coc-card p-6 border-4",children:[(0,l.jsx)("h3",{className:"text-xl font-bold text-coc-gold mb-4",children:"\uD83C\uDFAF Bias Analysis"}),(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsxs)("div",{className:"flex justify-between items-center",children:[(0,l.jsx)("span",{className:"text-yellow-200",children:"Strength Bias Score"}),(0,l.jsx)("span",{className:"text-blue-400 font-bold",children:((null==(p=v.strength_bias)?void 0:p.bias_score)||0).toFixed(3)})]}),(0,l.jsxs)("div",{className:"flex justify-between items-center",children:[(0,l.jsx)("span",{className:"text-yellow-200",children:"Bias Interpretation"}),(0,l.jsx)("span",{className:"text-white font-bold capitalize",children:(null==(j=v.strength_bias)?void 0:j.interpretation)||"N/A"})]}),(0,l.jsx)("div",{className:"coc-divider my-4"}),(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsx)("div",{className:"text-sm text-yellow-200 mb-2",children:"Grade Description"}),(0,l.jsx)("div",{className:"text-white",children:(null==(u=v.overall_grade)?void 0:u.description)||"No assessment available"})]})]})]})]})]})}function w(){return(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsxs)("div",{className:"coc-card p-6 border-4",children:[(0,l.jsx)("h2",{className:"text-2xl font-bold text-coc-gold mb-4",children:"\uD83D\uDD27 Backend Architecture & Workflow"}),(0,l.jsx)("p",{className:"text-yellow-200 mb-4",children:"Learn how the ML pipeline works from data collection to analysis."})]}),[{step:1,title:"Data Collection",file:"data_collector.py",description:"Background scheduler fetches data from CoC API every 6 hours",code:"async def run_collection_cycle():\n    for clan_tag in tracked_clans:\n        await collect_clan_snapshot(clan_tag)\n        await collect_war_log(clan_tag)\n        await collect_capital_raids(clan_tag)"},{step:2,title:"Data Storage",file:"MongoDB Collections",description:"Time-series data stored in MongoDB for historical analysis",code:"Collections:\n- players_history (snapshots every 6h)\n- clans_history (clan state over time)\n- wars_history (war outcomes)\n- war_attacks (individual attacks)\n- capital_raids_history (weekend raids)"},{step:3,title:"Feature Engineering",file:"feature_engineering.py",description:"Extract statistical features from raw data",code:"def compute_trophy_momentum(snapshots):\n    # Calculate velocity of trophy changes\n    slope = (trophies[-1] - trophies[0]) / days\n    return slope  # Positive = climbing"},{step:4,title:"ML Model Execution",file:"ml_module_*.py",description:"Each module processes features and generates insights",code:"def generate_report(data):\n    features = extract_features(data)\n    results = model.predict(features)\n    return {\n        'metrics': results,\n        'interpretation': explain(results)\n    }"},{step:5,title:"API Endpoint",file:"server.py",description:"FastAPI exposes results via REST endpoints",code:'@api_router.post("/ml/leadership/analyze")\nasync def analyze_leadership(request):\n    cached = await db.ml_results.find_one(...)\n    if cached: return cached\n    results = model.generate_report(data)\n    await db.ml_results.insert_one({...})'}].map(e=>(0,l.jsx)("div",{className:"coc-card p-6 border-4",children:(0,l.jsxs)("div",{className:"flex items-start gap-4",children:[(0,l.jsx)("div",{className:"coc-badge w-10 h-10 flex-shrink-0",children:(0,l.jsx)("span",{className:"text-coc-gold font-bold",children:e.step})}),(0,l.jsxs)("div",{className:"flex-1",children:[(0,l.jsx)("h3",{className:"text-xl font-bold text-white mb-2",children:e.title}),(0,l.jsx)("code",{className:"text-yellow-300 text-sm",children:e.file}),(0,l.jsx)("p",{className:"text-yellow-200 mt-2 mb-3",children:e.description}),(0,l.jsx)("pre",{className:"bg-black/40 p-3 rounded text-green-300 text-xs overflow-x-auto",children:(0,l.jsx)("code",{children:e.code})})]})]})},e.step)),(0,l.jsxs)("div",{className:"coc-card p-6 border-4",children:[(0,l.jsx)("h3",{className:"text-xl font-bold text-coc-gold mb-4",children:"\uD83D\uDCC1 Backend File Structure"}),(0,l.jsxs)("div",{className:"bg-black/40 p-4 rounded font-mono text-sm text-green-300",children:[(0,l.jsx)("div",{children:"/app/backend/"}),(0,l.jsx)("div",{children:"├── server.py              # FastAPI server (entry point)"}),(0,l.jsx)("div",{children:"├── coc_api_client.py     # CoC API wrapper"}),(0,l.jsx)("div",{children:"├── data_collector.py     # Background scheduler"}),(0,l.jsx)("div",{children:"├── data_models.py        # Pydantic models"}),(0,l.jsx)("div",{children:"├── feature_engineering.py # Feature extraction"}),(0,l.jsx)("div",{children:"├── ml_module_1_leadership.py"}),(0,l.jsx)("div",{children:"├── ml_module_2_pressure.py"}),(0,l.jsx)("div",{children:"├── ml_module_3_coordination.py"}),(0,l.jsx)("div",{children:"├── ml_module_4_volatility.py"}),(0,l.jsx)("div",{children:"├── ml_module_5_donations.py"}),(0,l.jsx)("div",{children:"├── ml_module_6_capital.py"}),(0,l.jsx)("div",{children:"└── ml_module_7_fairness.py"})]})]})]})}function _(){return(0,l.jsx)(a.Suspense,{fallback:(0,l.jsx)("div",{className:"min-h-screen bg-coc-dark flex items-center justify-center",children:(0,l.jsx)("div",{className:"spinner"})}),children:(0,l.jsx)(u,{})})}},5695:(e,s,t)=>{"use strict";var l=t(8999);t.o(l,"useRouter")&&t.d(s,{useRouter:function(){return l.useRouter}}),t.o(l,"useSearchParams")&&t.d(s,{useSearchParams:function(){return l.useSearchParams}})},5729:(e,s,t)=>{Promise.resolve().then(t.bind(t,357))}},e=>{var s=s=>e(e.s=s);e.O(0,[874,464,441,684,358],()=>s(5729)),_N_E=e.O()}]);